<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLUXza5VhXqVC6o75Eld_V98);.lst-kix_bb6zclht20iv-6>li{counter-increment:lst-ctn-kix_bb6zclht20iv-6}ol.lst-kix_bb6zclht20iv-3.start{counter-reset:lst-ctn-kix_bb6zclht20iv-3 0}ol.lst-kix_bb6zclht20iv-8.start{counter-reset:lst-ctn-kix_bb6zclht20iv-8 0}.lst-kix_bb6zclht20iv-4>li{counter-increment:lst-ctn-kix_bb6zclht20iv-4}.lst-kix_bb6zclht20iv-1>li{counter-increment:lst-ctn-kix_bb6zclht20iv-1}.lst-kix_bb6zclht20iv-8>li{counter-increment:lst-ctn-kix_bb6zclht20iv-8}ol.lst-kix_bb6zclht20iv-8{list-style-type:none}ol.lst-kix_bb6zclht20iv-7{list-style-type:none}ol.lst-kix_bb6zclht20iv-6{list-style-type:none}ol.lst-kix_bb6zclht20iv-6.start{counter-reset:lst-ctn-kix_bb6zclht20iv-6 0}ol.lst-kix_bb6zclht20iv-5{list-style-type:none}ol.lst-kix_bb6zclht20iv-1.start{counter-reset:lst-ctn-kix_bb6zclht20iv-1 0}ol.lst-kix_bb6zclht20iv-4{list-style-type:none}ol.lst-kix_bb6zclht20iv-3{list-style-type:none}ol.lst-kix_bb6zclht20iv-2{list-style-type:none}ol.lst-kix_bb6zclht20iv-1{list-style-type:none}ol.lst-kix_bb6zclht20iv-2.start{counter-reset:lst-ctn-kix_bb6zclht20iv-2 0}.lst-kix_bb6zclht20iv-7>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-7,lower-latin) ". "}.lst-kix_bb6zclht20iv-8>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-8,lower-roman) ". "}ol.lst-kix_bb6zclht20iv-0{list-style-type:none}.lst-kix_bb6zclht20iv-2>li{counter-increment:lst-ctn-kix_bb6zclht20iv-2}.lst-kix_bb6zclht20iv-5>li{counter-increment:lst-ctn-kix_bb6zclht20iv-5}li.li-bullet-1:before{margin-left:-21.8pt;white-space:nowrap;display:inline-block;min-width:21.8pt}.lst-kix_bb6zclht20iv-4>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-4,lower-latin) ". "}ol.lst-kix_bb6zclht20iv-7.start{counter-reset:lst-ctn-kix_bb6zclht20iv-7 0}ol.lst-kix_bb6zclht20iv-4.start{counter-reset:lst-ctn-kix_bb6zclht20iv-4 0}li.li-bullet-3:before{margin-left:-36pt;white-space:nowrap;display:inline-block;min-width:36pt}.lst-kix_bb6zclht20iv-5>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-5,lower-roman) ". "}.lst-kix_bb6zclht20iv-6>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-6,decimal) ". "}li.li-bullet-0:before{margin-left:-21.3pt;white-space:nowrap;display:inline-block;min-width:21.3pt}li.li-bullet-2:before{margin-left:-36pt;white-space:nowrap;display:inline-block;min-width:36pt}.lst-kix_bb6zclht20iv-7>li{counter-increment:lst-ctn-kix_bb6zclht20iv-7}.lst-kix_bb6zclht20iv-0>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-0,decimal) ". "}.lst-kix_bb6zclht20iv-1>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-1,lower-latin) ". "}ol.lst-kix_bb6zclht20iv-5.start{counter-reset:lst-ctn-kix_bb6zclht20iv-5 0}ol.lst-kix_bb6zclht20iv-0.start{counter-reset:lst-ctn-kix_bb6zclht20iv-0 0}.lst-kix_bb6zclht20iv-3>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-3,decimal) ". "}.lst-kix_bb6zclht20iv-0>li{counter-increment:lst-ctn-kix_bb6zclht20iv-0}.lst-kix_bb6zclht20iv-2>li:before{content:"" counter(lst-ctn-kix_bb6zclht20iv-2,lower-roman) ". "}.lst-kix_bb6zclht20iv-3>li{counter-increment:lst-ctn-kix_bb6zclht20iv-3}ol{margin:0;padding:0}table td,table th{padding:0}.c30{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c73{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:87pt;border-top-color:#ffffff;border-bottom-style:solid}.c83{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#000000;border-bottom-style:solid}.c79{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#000000;border-bottom-style:solid}.c81{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c75{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:94.5pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:81pt;border-top-color:#ffffff;border-bottom-style:solid}.c64{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:247.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c68{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#000000;border-bottom-style:solid}.c51{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:87pt;border-top-color:#000000;border-bottom-style:solid}.c46{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c61{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;background-color:#cccccc;border-left-style:solid;border-bottom-width:1pt;width:66pt;border-top-color:#ffffff;border-bottom-style:solid}.c107{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:82.5pt;border-top-color:#000000;border-bottom-style:solid}.c76{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:83.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c93{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:86.2pt;border-top-color:#000000;border-bottom-style:solid}.c62{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:81pt;border-top-color:#ffffff;border-bottom-style:solid}.c55{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:86.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c112{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c97{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:66pt;border-top-color:#000000;border-bottom-style:solid}.c119{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:81pt;border-top-color:#ffffff;border-bottom-style:solid}.c104{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c100{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:66pt;border-top-color:#ffffff;border-bottom-style:solid}.c57{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:247.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c67{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:83.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c115{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#000000;border-bottom-style:solid}.c94{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:94.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c80{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:82.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c131{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:247.5pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#ffffff;border-bottom-style:solid}.c122{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:86.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c138{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c133{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:247.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c74{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:87pt;border-top-color:#ffffff;border-bottom-style:solid}.c99{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#000000;border-bottom-style:solid}.c135{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#000000;border-bottom-style:solid}.c54{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:66pt;border-top-color:#ffffff;border-bottom-style:solid}.c108{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:94.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c103{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c98{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#ffffff;border-bottom-style:solid}.c91{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c140{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:81pt;border-top-color:#000000;border-bottom-style:solid}.c136{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c134{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:83.2pt;border-top-color:#000000;border-bottom-style:solid}.c85{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c118{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:94.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c52{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#ffffff;border-bottom-style:solid}.c130{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#ffffff;border-bottom-style:solid}.c87{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:82.5pt;border-top-color:#ffffff;border-bottom-style:solid}.c48{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c126{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#000000;border-bottom-style:solid}.c109{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#cccccc;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:79.4pt;border-top-color:#ffffff;border-bottom-style:solid}.c23{border-right-style:solid;padding:2.8pt 2.8pt 2.8pt 2.8pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:87pt;border-top-color:#ffffff;border-bottom-style:solid}.c90{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#cccccc;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c117{margin-left:18pt;padding-top:10pt;padding-left:18pt;padding-bottom:0pt;line-height:2.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c110{margin-left:17.5pt;padding-top:11pt;padding-left:3.8pt;padding-bottom:2pt;line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c40{margin-left:36pt;padding-top:0pt;text-indent:-36pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c5{background-color:#ffffff;padding-top:0pt;padding-bottom:0pt;line-height:1.3571428571428572;orphans:2;widows:2;text-align:left}.c37{color:#008000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c11{color:#0033b3;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c19{color:#795e26;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c0{color:#3b3b3b;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c18{color:#8c8c8c;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:italic}.c8{background-color:#ffffff;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c7{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c78{padding-top:0pt;padding-bottom:6pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c3{padding-top:10pt;padding-bottom:6pt;line-height:1.5;orphans:2;widows:2;text-align:justify}.c132{padding-top:0pt;padding-bottom:6pt;line-height:1.1500000000000001;orphans:2;widows:2;text-align:right}.c35{padding-top:10pt;padding-bottom:10pt;line-height:1.5;orphans:2;widows:2;text-align:justify}.c113{padding-top:0pt;padding-bottom:10pt;line-height:1.1500000000000001;orphans:2;widows:2;text-align:center}.c106{padding-top:0pt;padding-bottom:6pt;line-height:1.5;orphans:2;widows:2;text-align:right}.c44{padding-top:10pt;padding-bottom:10pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c36{padding-top:0pt;padding-bottom:6pt;line-height:1.5;orphans:2;widows:2;text-align:justify}.c86{padding-top:10pt;padding-bottom:10pt;line-height:1.5;orphans:2;widows:2;text-align:center}.c58{padding-top:0pt;padding-bottom:6pt;line-height:1.1500000000000001;orphans:2;widows:2;text-align:center}.c56{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c1{font-size:10pt;font-family:"Courier New";font-style:italic;color:#00627a;font-weight:400}.c6{font-size:10pt;font-family:"Courier New";color:#0000ff;font-weight:400}.c24{font-size:9pt;font-family:"Times New Roman";font-style:italic;font-weight:400}.c123{margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto}.c2{font-size:10pt;font-family:"Courier New";color:#3b3b3b;font-weight:400}.c128{margin-left:-0.8pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c102{padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c16{font-size:10pt;font-family:"Courier New";color:#080808;font-weight:400}.c22{font-size:10pt;font-family:"Courier New";color:#795e26;font-weight:400}.c13{font-size:10pt;font-family:"Courier New";color:#a31515;font-weight:400}.c96{border-spacing:0;border-collapse:collapse;margin-right:auto}.c34{font-size:10pt;font-family:"Courier New";color:#0070c1;font-weight:400}.c39{font-size:10pt;font-family:"Courier New";color:#af00db;font-weight:400}.c15{-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline;text-decoration-skip-ink:none}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c65{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:justify}.c21{font-size:10pt;font-family:"Courier New";color:#0033b3;font-weight:400}.c9{font-size:10pt;font-family:"Courier New";color:#267f99;font-weight:400}.c14{font-size:10pt;font-family:"Courier New";color:#871094;font-weight:400}.c17{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c33{color:#000000;text-decoration:none;vertical-align:baseline}.c25{font-weight:400;font-size:11pt;font-family:"Arial"}.c66{margin-left:17.4pt;padding-left:18pt;page-break-after:avoid}.c26{font-weight:700;font-size:18pt;font-family:"Times New Roman"}.c137{font-weight:400;font-size:7pt;font-family:"Times New Roman"}.c105{font-weight:400;font-size:14pt;font-family:"Times New Roman"}.c92{margin-left:21.3pt;text-indent:-21pt;page-break-after:avoid}.c27{font-weight:700;font-size:10pt;font-family:"Times New Roman"}.c41{font-size:10pt;font-weight:400;font-family:"Courier New"}.c139{font-weight:400;font-size:18pt;font-family:"Times New Roman"}.c72{font-weight:700;font-size:11pt;font-family:"Times New Roman"}.c38{font-weight:400;font-size:16pt;font-family:"Times New Roman"}.c42{text-decoration:none;vertical-align:baseline;font-style:normal}.c120{background-color:#ffffff;max-width:482pt;padding:70.8pt 56.6pt 70.8pt 56.7pt}.c12{font-size:11pt;font-weight:400;font-family:"Times New Roman"}.c43{font-weight:400;font-size:12pt;font-family:"Times New Roman"}.c60{font-weight:700;font-size:11pt;font-family:"Arial"}.c63{margin-left:18pt;padding-left:3.3pt;page-break-after:avoid}.c29{font-weight:400;font-size:10pt;font-family:"Times New Roman"}.c129{font-size:9pt;font-weight:400;font-family:"Times New Roman"}.c82{background-color:#ffffff;color:#0a0a0a}.c50{text-indent:36pt;page-break-after:avoid}.c111{padding:0;margin:0}.c4{color:inherit;text-decoration:inherit}.c32{font-style:italic}.c47{color:#098658}.c101{height:15pt}.c69{color:#ee0000}.c125{height:6.8pt}.c124{height:11.2pt}.c127{height:5.5pt}.c53{color:#067d17}.c116{height:10.5pt}.c45{height:12pt}.c89{height:3.2pt}.c114{height:15.8pt}.c59{height:0pt}.c77{height:3.8pt}.c88{background-color:#cccccc}.c95{color:#8c8c8c}.c84{color:#1750eb}.c49{color:#001080}.c71{color:#008000}.c70{height:12.8pt}.c121{height:13.5pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.5;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:12pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:12pt;font-family:"Calibri"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c120 doc-content"><p class="c58" id="h.e23vd4dlwjow"><span class="c17 c38">UNIVERSIDAD COMPLUTENSE DE MADRID</span></p><p class="c58"><span class="c17 c38">FACULTAD DE CIENCIAS DE LA DOCUMENTACI&Oacute;N</span></p><p class="c58 c45"><span class="c17 c38"></span></p><p class="c58"><span class="c17 c38">M&aacute;ster en Data Science, Big Data &amp; Business Analytics</span></p><p class="c58"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 184.79px; height: 215.39px;"><img alt="" src="images/image7.png" style="width: 184.79px; height: 215.39px; margin-left: -0.00px; margin-top: -0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c58"><span class="c17 c38">Trabajo Fin de M&Aacute;STER</span></p><p class="c58 c45"><span class="c17 c38"></span></p><p class="c58"><span class="c17 c26">&iquest;Qu&eacute; elementos musicales hacen que </span></p><p class="c58"><span class="c17 c26">una canci&oacute;n sea popular?</span></p><p class="c58"><span class="c17 c139">Un an&aacute;lisis de la data de Spotify</span></p><p class="c58 c45"><span class="c17 c105"></span></p><p class="c58 c45"><span class="c17 c105"></span></p><p class="c58"><span class="c17 c38">Alumna: Luc&iacute;a Durb&aacute;n Redondo</span></p><p class="c113"><span class="c17 c38">Tutores: Santiago Mota y Carlos Ortega</span></p><p class="c113 c45"><span class="c17 c38"></span></p><p class="c113 c45"><span class="c17 c38"></span></p><p class="c113 c45"><span class="c17 c38"></span></p><p class="c58" id="h.qymmgmpmr9t1"><span class="c17 c43">Madrid, 19 de Febrero del 2026</span></p><p class="c132 c45"><span class="c17 c43"></span></p><p class="c45 c132"><span class="c17 c43"></span></p><p class="c78 c45"><span class="c17 c43"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78"><span class="c7">Agradecimientos</span></p><p class="c36"><span class="c17 c29">A mi familia, mis padres y mi hermana, por siempre ayudarme y animarme a hacer lo que de verdad me gusta, por apoyarme en cada paso de mi carrera profesional.</span></p><p class="c36"><span class="c17 c29">A Nacho, por estar ah&iacute; en el d&iacute;a a d&iacute;a, en los altos y los bajos, por ayudarme en todo lo puedes, por creer en m&iacute; y animarme cuando no encuentro las fuerzas.</span></p><p class="c36"><span class="c17 c29">A mis abuelos, que aunque ya no est&eacute;n s&eacute; que estar&iacute;an orgullosos de m&iacute; y de la persona en la que me he convertido.</span></p><p class="c36"><span class="c17 c29">A mis amigos, en especial a Ana y Marina, por aguantarme cuando solo puedo quejarme y ayudar a animarme como mejor se les da, escuch&aacute;ndome, d&aacute;ndome su opini&oacute;n en las cosas que no tengo claras y con un buen matcha.</span></p><p class="c36"><span class="c17 c29">Gracias a todos.</span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c45 c78"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c78"><span class="c7">Abstracto</span></p><p class="c3"><span class="c29">Este trabajo investiga cu&aacute;les son los factores del sonido m&aacute;s importantes que hacen que una canci&oacute;n sea m&aacute;s popular que otras, bas&aacute;ndose en datos recopilados desde 2010 hasta julio de 2025. </span><span class="c29">Esta investigaci&oacute;n se ampl&iacute;a a&uacute;n m&aacute;s analizando si los elementos externos, reconocidos como &ldquo;contexto&rdquo;, moderan la relaci&oacute;n entre estas variables importantes y la popularidad.</span><span class="c29">&nbsp;Para responder a la pregunta principal del trabajo, se han utilizando datos extra&iacute;dos la API web de Spotify, teniendo como predictores una serie de variables basadas en el audio, y como respuesta la variable &ldquo;popularidad&rdquo;. Debido a que la API de Spotify lleva meses cerrada y sin la posibilidad de utilizarla, y que estos datos ya estaban disponibles online gracias a Anna&rsquo;s Archive, fueron descargados con la ayuda de un torrent.</span></p><p class="c3"><span class="c29">Se utiliza un </span><span class="c29">LightGBM</span><span class="c29">&nbsp;para evaluar cu&aacute;les de las variables son m&aacute;s importantes para calcular qu&eacute; hace a una canci&oacute;n m&aacute;s popular que otra. </span><span class="c29">Un primer an&aacute;lisis revel&oacute; que las dos variables m&aacute;s importantes eran la </span><span class="c29 c32">loudness</span><span class="c29">&nbsp;y el </span><span class="c29 c32">explicit</span><span class="c29">. Un segundo an&aacute;lisis m&aacute;s concreto realizado con LightGBM que incluy&oacute; valores de SHAP. Esto demostr&oacute; que el </span><span class="c29 c32">loudness, explicit </span><span class="c29">y</span><span class="c29 c32">&nbsp;speechiness</span><span class="c29">&nbsp;son importantes y que su efecto se potencia con este modelo. Tambi&eacute;n realizaremos un modelo de machine learning para ayudarnos a predecir qu&eacute; canciones ser&aacute;n populares, dependiendo de las caracter&iacute;sticas de sonido de la canci&oacute;n.</span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c17 c72"></span></p><p class="c78 c45"><span class="c7"></span></p><p class="c44"><span class="c7">&Iacute;ndice de contenidos</span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.x2d4zn5ipr0n">1. Introducci&oacute;n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.k5c1mdgh6mf3">1.1. Problema de investigaci&oacute;n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.f2eaxd43dri6">1.2. Motivaci&oacute;n empresarial&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.sqmyvwpes1fe">1.3. Motivaci&oacute;n acad&eacute;mica&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.7l13w6pfcbsi">2. Data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.u1sw67y3cdq9">2.1. Recopilaci&oacute;n de la data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.t013syaswjnv">2.2. Descripci&oacute;n de la data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.fmjn68dt7egq">3. Metodolog&iacute;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.2ehx0x7gokjs">3.1. An&aacute;lisis simple&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.cm4m2y92202w">3.2. M&eacute;todos Candidatos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.v2sc0k5vcskn">3.3. Tabla res&uacute;men de los m&eacute;todos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.udurz4qhwqdq">3.4. Selecci&oacute;n del modelo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.8vy4o1ouubrj">4. Resultados&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.z9lec5p427oi">4.1. An&aacute;lisis principal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.3axojkbl9ma5">4.2. Modelo predictor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.bw1f4ewxhdhz">5. Conclusi&oacute;n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.5jec0bqv34yl">5.1. Resumen de la investigaci&oacute;n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.rg4prtvu3i09">5.2. Interpretaci&oacute;n de los resultados&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.uhbn93fzvjew">5.3. Implicaciones directivas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.iol872xrflt6">5.4. Limitaciones y futuras l&iacute;neas de investigaci&oacute;n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.sb982dmh5bj2">6. Bibliograf&iacute;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20</a></span></p><p class="c102"><span class="c17 c43"><a class="c4" href="#h.jcucekg1dc7d">6. &nbsp;Anexos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.9enu9dvpjwh4">6.1. Anexo 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.6h4mihf77p1">6.2. Anexo 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.nv4f63yks8x4">6.3. Anexo 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;27</a></span></p><p class="c56"><span class="c17 c43"><a class="c4" href="#h.o6etylow8s0p">6.4. Anexo 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30</a></span></p><p class="c44 c45"><span class="c7"></span></p><p class="c44 c45"><span class="c7"></span></p><p class="c44 c45"><span class="c7"></span></p><p class="c44 c45"><span class="c7"></span></p><p class="c44 c45"><span class="c7"></span></p><ol class="c111 lst-kix_bb6zclht20iv-0 start" start="1"><li class="c44 c63 li-bullet-0"><h5 id="h.x2d4zn5ipr0n" style="display:inline"><span class="c7">Introducci&oacute;n</span></h5></li></ol><h6 class="c44 c50" id="h.k5c1mdgh6mf3"><span class="c7">1.1. Problema de investigaci&oacute;n</span></h6><p class="c35"><span class="c17 c12">En nuestra generaci&oacute;n y las anteriores, siempre ha estado presente la m&uacute;sica, y estamos expuestos a ella constantemente en nuestro d&iacute;a a d&iacute;a. Seg&uacute;n un estudio realizado en 26 pa&iacute;ses con personas entre 16-64 a&ntilde;os, escuchamos 20,7 horas de m&uacute;sica grabada a la semana (IFPI, 2023), y se podr&iacute;a argumentar que m&aacute;s si tenemos en cuenta la m&uacute;sica de fondo. Esta gran presencia de la m&uacute;sica en nuestras vidas se puede asociar a la relaci&oacute;n que existe entre el acto de escuchar m&uacute;sica y la dopamina generada cuando lo hacemos. La evidencia causal de que la transmisi&oacute;n dopamin&eacute;rgica modula tanto los componentes hed&oacute;nicos (agrado) como motivacionales (deseo) de la recompensa musical en los seres humanos, as&iacute; como sugiere que la dopamina desempe&ntilde;a un papel fundamental en la recompensa por est&iacute;mulos abstractos (m&uacute;sica), posiblemente a trav&eacute;s de interacciones con procesos cognitivos (expectativa, memoria, aprendizaje) que conforman el placer musical (Ferreri et al., 2019).</span></p><p class="c35"><span class="c12">Los ingresos por m&uacute;sica grabada han crecido de forma continua durante una d&eacute;cada, y sigue habiendo un gran potencial de crecimiento y desarrollo, a trav&eacute;s de la innovaci&oacute;n, las tecnolog&iacute;as emergentes y la inversi&oacute;n tanto en artistas como en las partes en evoluci&oacute;n del creciente ecosistema musical mundial. En 2024, los ingresos totales en la industria musical fueron de 29.6 </span><span class="c12">billones</span><span class="c17 c12">&nbsp;USD, siendo un crecimiento de 4,8% respecto al a&ntilde;o anterior. Aunque s&iacute; se aprecian cambios en la forma de consumir la m&uacute;sica, ya que los servicios de streaming tuvieron un crecimiento del 9,5% y las ventas f&iacute;sicas tuvieron un descenso del 3,1%, respecto al a&ntilde;o anterior. Esto no quiere decir que dejemos de escuchar m&uacute;sica, sino que la escuchamos de forma diferente, en el mayor caso en plataformas de streaming como Spotify, Apple Music o Amazon Music (IFPI, 2025).</span></p><p class="c35"><span class="c12">Sabemos que para la industria musical y sus componentes, es importante saber qu&eacute; hace a una canci&oacute;n popular, ya sea para </span><span class="c12">recrearlo</span><span class="c17 c12">&nbsp;o entender qu&eacute; es lo que hace que las masas quieran escuchar ciertas canciones por encima de otras. Para saber si qu&eacute; hace a una canci&oacute;n un &ldquo;hit&rdquo;, el profesor Jonah Berger se centra en el &ldquo;t&uacute;&rdquo;, The Power of &ldquo;You&rdquo;, conectando nuestras experiencias personales a la canci&oacute;n, haciendo que esta nos parezca m&aacute;s identificable y emocionalmente resonante. Es decir, para los consumidores es importante lo que dice la canci&oacute;n, tanto como el ritmo o el tempo de esta, sentirse identificado con lo que est&aacute; diciendo es gran parte de su popularidad (Berger, 2021).</span></p><p class="c35"><span class="c12">En este trabajo, nos enfocaremos en cuales son los factores que m&aacute;s contribuyen para el &eacute;xito de una canci&oacute;n. Para ello, analizaremos las caracter&iacute;sticas de audio de las pistas para conocer sus caracter&iacute;sticas, extra&iacute;das a trav&eacute;s de la API web de Spotify, gracias a la extracci&oacute;n </span><span class="c12">por parte del grupo de Anna&#39;s Archive (2025), que extrajeron todos los datos de las canciones desde 2010 a Julio de 2025 y han sido descargado con la ayuda de un torrent. </span><span class="c17 c12">Refiri&eacute;ndose a todos los elementos que componen una canci&oacute;n, los que est&aacute;n relacionados con el estado de &aacute;nimo de la canci&oacute;n (danceability, valence, energy, tempo, key), con sus propiedades (loudness, speechiness, instrumentalness), y con su contexto (acousticness, liveness) (Spotify for Developers, 2025). Profundizaremos en el an&aacute;lisis para comprender c&oacute;mo el contexto afecta a los predictores de popularidad y en qu&eacute; medida los oyentes se ven influidos por factores externos. La variable dependiente ser&aacute; la variable &ldquo;popularidad&rdquo; proporcionada por el conjunto de datos, que en &uacute;ltima instancia muestra el grado de popularidad de una canci&oacute;n en comparaci&oacute;n con otras.</span></p><h6 class="c35 c50" id="h.f2eaxd43dri6"><span class="c7">1.2. Motivaci&oacute;n empresarial</span></h6><p class="c35"><span class="c17 c12">Poder determinar qu&eacute; caracter&iacute;sticas hacen que una canci&oacute;n alcance mayor popularidad que otra es una cuesti&oacute;n fuertemente impulsada por la propia industria musical (Borg &amp; Hokkanen, 2011). El rendimiento de un tema puede influir de forma notable en los ingresos de sellos discogr&aacute;ficos, plataformas de streaming y otros participantes del sector. Cuando se entienden los elementos que condicionan el &eacute;xito, los responsables de marketing y los ejecutivos pueden decidir con mayor criterio qu&eacute; lanzamientos impulsar, qu&eacute; estrategias de promoci&oacute;n aplicar y c&oacute;mo distribuir recursos como campa&ntilde;as publicitarias o apoyo a giras. Esa misma informaci&oacute;n tambi&eacute;n sirve para detectar tendencias que est&aacute;n surgiendo, descubrir nuevos talentos y estimar con mayor precisi&oacute;n qu&eacute; canciones tienen m&aacute;s posibilidades de destacar en el futuro. Para las grandes compa&ntilde;&iacute;as y para quienes invierten en m&uacute;sica, es clave mantener una actitud innovadora, ofrecer propuestas frescas y adaptarse con rapidez a los cambios del mercado. Adem&aacute;s, analizar los factores asociados al &eacute;xito puede revelar oportunidades de mejora en productos y servicios. Por ejemplo, ciertos g&eacute;neros o estilos conectan mejor con grupos demogr&aacute;ficos espec&iacute;ficos o con determinadas regiones, lo que permite ajustar la oferta y la comunicaci&oacute;n para responder de manera m&aacute;s efectiva a las preferencias del p&uacute;blico objetivo.</span></p><p class="c35"><span class="c17 c12">Actualmente, la industria musical depende en gran medida de las plataformas de streaming como Spotify, Apple Music o Amazon Music. Estas plataformas emplean sistemas algor&iacute;tmicos para sugerir contenido musical a sus usuarios bas&aacute;ndose en su comportamiento de escucha y gustos personales. Cuando los responsables del sector comprenden qu&eacute; elementos determinan la popularidad de un tema, pueden ofrecer a estas plataformas datos m&aacute;s precisos sobre qu&eacute; canciones tienen mayor potencial de &eacute;xito entre audiencias espec&iacute;ficas o en zonas geogr&aacute;ficas concretas.</span></p><h6 class="c35 c50" id="h.sqmyvwpes1fe"><span class="c7">1.3. Motivaci&oacute;n acad&eacute;mica</span></h6><p class="c35"><span class="c17 c12">Entender el por qu&eacute; ciertas anatom&iacute;as de las canciones es interesante para los acad&eacute;micos para poder ayudar a recrearlas y saber las caracter&iacute;sticas que hacen a una canci&oacute;n un &ldquo;hit&rdquo;. Muchos acad&eacute;micos se han centrado en analizar la anatom&iacute;a de una canci&oacute;n para tratar de comprender cu&aacute;les son los elementos clave que impulsan su &eacute;xito, utilizando muchas t&eacute;cnicas y conjuntos de datos diferentes. Sin embargo, este estudio representar&aacute; una visi&oacute;n m&aacute;s completa del tema.</span></p><p class="c35"><span class="c17 c12">Terroso-Saenz, Soto y Mu&ntilde;oz (2022) examinan los temas m&aacute;s escuchados en Spotify en 52 pa&iacute;ses, analizando atributos como bailabilidad, positividad e intensidad, lo cual les permite observar c&oacute;mo dichas caracter&iacute;sticas reflejan tendencias an&iacute;micas y c&oacute;mo interact&uacute;an con factores contextuales que pueden influir en los h&aacute;bitos de escucha de la poblaci&oacute;n. Tambi&eacute;n desarrollaron un modelo de series temporales multivariante para anticipar las preferencias musicales en esos pa&iacute;ses, hallando modificaciones significativas en dichos patrones como consecuencia de la pandemia.</span></p><p class="c35"><span class="c17 c12">En este trabajo se analizan las canciones con m&aacute;s de 55 puntos de popularidad, incluyendo 15 a&ntilde;os de datos y todos los pa&iacute;ses que est&aacute;n presentes en la data de Spotify, as&iacute; como todas las variables que tiene una canci&oacute;n dentro de esta misma data.</span></p><ol class="c111 lst-kix_bb6zclht20iv-0" start="2"><li class="c35 c63 li-bullet-0"><h5 id="h.7l13w6pfcbsi" style="display:inline"><span class="c7">Data</span></h5></li></ol><h6 class="c35 c50" id="h.u1sw67y3cdq9"><span class="c7">2.1. Recopilaci&oacute;n de la data</span></h6><p class="c35"><span class="c12">Para este trabajo he decidido trabajar con la API de Spotify, por el vol&uacute;men de datos que tienen a nuestra disposici&oacute;n y por la precisi&oacute;n de &eacute;</span><span class="c12">stos</span><span class="c12">. En mi caso, cuando fu&iacute; a extraer los datos con Spotify for Developers, el sistema estaba ca&iacute;do y no dejaban scrapear la data. Encontr&aacute;ndome este problema, decid&iacute; indagar en el tema y encontr&eacute; que el grupo an&oacute;nimo &ldquo;Anna&rsquo;s Archive&rdquo; hab&iacute;a scrapeado toda la base de datos de Spotify hace poco y hab&iacute;an abierto al p&uacute;blico la descarga de esos datos (Anna&#39;s Archive, 2025). </span></p><p class="c35"><span class="c17 c12">Spotify es la plataforma l&iacute;der de streaming musical del mundo, con m&aacute;s de 670 millones de usuarios activos mensuales, un 40% de estos siendo usuarios de pago en el cuarto trimestre de 2024. La plataforma cuenta con m&aacute;s de 200 millones de canciones disponibles, teniendo que ser sumado otras formas de entretenimiento en audio, como los podcasts. Todo esto hace que Spotify tuviera unos ingresos de m&aacute;s de 15 billones de euros en 2024, superando con creces a sus principales competidores Tencent, Apple Music y Amazon, teniendo una cuota de mercado basada en el n&uacute;mero de suscriptores del 32% (Statista, 2025).</span></p><p class="c35"><span class="c12">Gracias al trabajo de Anna&rsquo;s Archive consegu&iacute; descargarme, por medio de torrent, todos los metadatos de todas las canciones en Spotify desde 2010 a julio de 2025, un total de 256.039.007 canciones/pistas. De los archivos descargados, dos nos son &uacute;tiles para este trabajo, &ldquo;spotify_clean.sqlite3&rdquo; y &ldquo;spotify_clean_audio_features.sqlite3&rdquo;, el primero siendo la informaci&oacute;n principal como nombre de canci&oacute;n, ID de canci&oacute;n, nombre del/los artista/s, ID del/los artista/s, y la popularidad, y el segundo teniendo las variables que hacen la canci&oacute;n como bailabilidad, </span><span class="c12">valencia</span><span class="c17 c12">, y tempo. Cabe recalcar que para este trabajo estar&eacute; usando los nombres de las variables en ingl&eacute;s, igual que se usar&aacute;n en la base de datos, as&iacute; como en el c&oacute;digo realizado.</span></p><p class="c35"><span class="c12">Estas bases de datos originales han sido limpiadas y unidas por medio de SQL, ya que trabajar y compartir una base de datos de m&aacute;s de 256 millones de pistas ser&iacute;a complicado, as&iacute; que se ha decidido acortar esas bases de datos a las 100.000 canciones m&aacute;s populares en ellas. Tambi&eacute;n se han juntado ambos datasets, dado que cada uno de ellos contienen diferentes tipos de datos que nos interesan para este an&aacute;lisis, por una parte la informaci&oacute;n general de una canci&oacute;n, y por otra las caracter&iacute;sticas ac&uacute;sticas de esta, acabando con un total de 98.960 canciones con todas las variables necesarias para nuestro an&aacute;lisis en un mismo dataset.</span></p><h6 class="c35 c50" id="h.t013syaswjnv"><span class="c7">2.2. Descripci&oacute;n de la data</span></h6><p class="c35"><span class="c12">La base de datos se compone de 13 variables y 7 identificadores por canci&oacute;n. A continuaci&oacute;n podemos ver la </span><span class="c12 c32">Tabla 1</span><span class="c12">&nbsp;con una descripci&oacute;n detallada de cada variable, y la </span><span class="c12 c32">Tabla 2</span><span class="c17 c12">, donde encontramos estad&iacute;sticas descriptivas de las variables num&eacute;ricas.</span></p><table class="c128"><tr class="c59"><td class="c122" colspan="1" rowspan="1"><p class="c10 c45"><span class="c17 c29"></span></p></td><td class="c119" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Nombre</span></p></td><td class="c100" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Tipo</span></p></td><td class="c133" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Descripci&oacute;n</span></p></td></tr><tr class="c59"><td class="c93" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">Identificadores</span></p></td><td class="c88 c140" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">track_id</span></p></td><td class="c88 c97" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c88 c131" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Identificador &uacute;nico de canci&oacute;n</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">track_name</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Nombre de la canci&oacute;n</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">artist_name</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Nombre del artista o artistas</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">artist_id</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Identificador &uacute;nico del artista o artistas</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">isrc</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">C&oacute;digo Internacional Normalizado de Grabaci&oacute;n</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">album_name</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Nombre del &aacute;lbum</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">album_type</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">text</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Tipo de &aacute;lbum, puede ser &aacute;lbum o single</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">Variables basadas en audio</span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">explicit</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">integer</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Indica contenidos como lenguaje soez, referencias sexuales, violencia o referencias a drogas que se consideren inapropiadas para los ni&ntilde;os. Valores entre 0 y 1</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">key</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">integer</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">La clave en la que se encuentra la pista. Valores de 0 a 11</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">mode</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">integer</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Indica la modalidad (mayor o menor) de una pista. Mayor es 1 y menor es 0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">danceability</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Descripci&oacute;n de la idoneidad de una pista para bailar, basada en la combinaci&oacute;n de muchos elementos, incluyendo el tempo y la estabilidad del ritmo. Valores de 0,0 a 1,0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">loudness</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Volumen general en decibelios (dB) de una canci&oacute;n. Valores de -60 a 0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">speechiness</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Detecta la presencia de palabras habladas en una pista. Valores de 0,0 a 1,0. Cuanto m&aacute;s se acerque a 1, m&aacute;s probable es que la grabaci&oacute;n est&eacute; compuesta &iacute;ntegramente por palabras</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">acousticness</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Medida de confianza sobre si la pista es ac&uacute;stica. Valores de 0,0 a 1,0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">energy</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Representaci&oacute;n de la medida perceptiva de intensidad y actividad. Valores de 0,0 a 1,0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">valence</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Descriptor de la positividad musical de una grabaci&oacute;n. Valores de 0,0 a 1,0. Una valencia m&aacute;s cercana a 1 indica canciones m&aacute;s alegres y felices, mientras que lo contrario indica canciones tristes y enfadadas</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">tempo</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Tempo estimado de una grabaci&oacute;n en pulsaciones por minuto (BPM). Valores de 0 a 230</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">instrumentalness</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Predice si una grabaci&oacute;n no contiene voces, con valores entre 0,0 y 1,0. Cuanto m&aacute;s se acerque a 1,0, m&aacute;s instrumental ser&aacute; la grabaci&oacute;n</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10 c45"><span class="c33 c29 c32"></span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">liveness</span></p></td><td class="c61" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">numeric</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">Detector de p&uacute;blico en la grabaci&oacute;n. Cuanto m&aacute;s alto sea el valor, m&aacute;s probable es que la canci&oacute;n se haya grabado en directo. Valores de 0,0 a 1.0</span></p></td></tr><tr class="c59"><td class="c55" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">Variable de inter&eacute;s</span></p></td><td class="c62" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">popularity</span></p></td><td class="c54" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">integer</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">La popularidad de una canci&oacute;n es un valor entre 0 y 100, siendo 100 la m&aacute;s popular. La popularidad se calcula mediante un algoritmo y se basa, en su mayor parte, en el n&uacute;mero total de reproducciones que ha tenido la canci&oacute;n y en la antig&uuml;edad de dichas reproducciones. En t&eacute;rminos generales, las canciones que se reproducen mucho en la actualidad tendr&aacute;n una mayor popularidad que las canciones que se reproduc&iacute;an mucho en el pasado.</span></p></td></tr></table><p class="c44"><span class="c24">Tabla 1. Descripci&oacute;n de las variables e identificadores incluidos en el conjunto de datos, basada en la documentaci&oacute;n de Spotify </span><span class="c129">(2025)</span><span class="c24 c33">.</span></p><p class="c35"><span class="c12">En esta primera tabla, el primer grupo representa los identificadores de las canciones, nombres o ID&rsquo;s, que son </span><span class="c12 c32">track_id, track_name, artist_name, artist_id, isrc, album_name </span><span class="c12">y </span><span class="c12 c32">album_type.</span><span class="c12">&nbsp;Los nombres son los identificadores generales de las pistas, debido a que los nombres de canciones, &aacute;lbumes y artistas se pueden repetir necesitamos los ID&rsquo;s, el m&aacute;s importante siendo el de la canci&oacute;n, ya que el del artista se repite en todas las canciones de este. El segundo grupo representa las variables de audio de las pistas, estas son las principales que se van a analizar en el siguiente punto, ya que lo que queremos ver es cu&aacute;les son m&aacute;s importantes y pesadas para la popularidad de una canci&oacute;n, siendo esta, la </span><span class="c12 c32">popularity</span><span class="c12">, nuestra variable principal. Un valor num&eacute;rico entre el 0 y el 100 que mide la popularidad de la pista, siendo calculada gracias a una f&oacute;rmula interna de Spotify, con las anteriores variables y algunas m&aacute;s como escuchas recientes.</span></p><table class="c128"><tr class="c59"><td class="c76" colspan="1" rowspan="1"><p class="c10 c45"><span class="c17 c29"></span></p></td><td class="c103" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Minimum</span></p></td><td class="c103" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Maximum</span></p></td><td class="c103" colspan="1" rowspan="1"><p class="c65"><span class="c17 c27">Mean</span></p></td><td class="c103" colspan="1" rowspan="1"><p class="c65"><span class="c17 c27">Median</span></p></td><td class="c103" colspan="1" rowspan="1"><p class="c65"><span class="c17 c27">Std. Dev.</span></p></td></tr><tr class="c59"><td class="c88 c134" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">explicit</span></p></td><td class="c88 c115" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,21490</span></p></td><td class="c68" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0</span></p></td><td class="c88 c126" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,410756</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">key</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">11</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">5,279091</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">5</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">3,582641</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">mode</span></p></td><td class="c109 c88" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,602724074</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">1</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,489334001</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">danceability</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,998</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,613187917</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,636</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,177239662</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">loudness</span></p></td><td class="c109 c88" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-54,341</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1,16</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">-8,472065796</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">-6,669</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">6,715578722</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">speechiness</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,967</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,095177444</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,052</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,102241976</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">acousticness</span></p></td><td class="c109 c88" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,996</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,318096082</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,217</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,304019448</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">energy</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,618150761</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,655</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,23364819</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">valence</span></p></td><td class="c88 c109" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,502627282</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,504</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,253780287</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">tempo</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">215,962</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">121,2382386</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">120,944</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">29,36734237</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">instrumentalness</span></p></td><td class="c109 c88" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">1</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,100262623</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,00000436</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,263016814</span></p></td></tr><tr class="c59"><td class="c67" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">liveness</span></p></td><td class="c104" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,997</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,189790108</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,124</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">0,159628129</span></p></td></tr><tr class="c59"><td class="c67 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">popularity</span></p></td><td class="c109 c88" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">55</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">100</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">61,93753033</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">60</span></p></td><td class="c81" colspan="1" rowspan="1"><p class="c65"><span class="c17 c29">5,98333845</span></p></td></tr></table><p class="c44"><span class="c24">Tabla 2. Estad&iacute;sticas descriptivas de las variables incluidas en el conjunto de datos despu&eacute;s de la limpieza.</span></p><p class="c35"><span class="c12">Viendo la </span><span class="c12 c32">Tabla 2</span><span class="c12">, se pueden apreciar n&uacute;meros generales de nuestras variables num&eacute;ricas, teniendo una idea clara de c&oacute;mo se miden estas variables , c&oacute;mo las tenemos representadas en nuestros datos y sus promedios, medianas y desviaci&oacute;n est&aacute;ndar, ayud&aacute;ndonos a visualizar una imagen general de nuestros datos. Como ejemplo se aprecia que la media y mediana de la </span><span class="c12 c32">popularity</span><span class="c12">&nbsp;est&aacute; alrededor de los 60 puntos, lo que nos quiere decir que aunque tenemos un conjunto de datos de casi 100.000 p&igrave;stas con popularidad entre los 55 y 100 puntos, la mayor&iacute;a de &eacute;</span><span class="c12">stas</span><span class="c17 c12">&nbsp;est&aacute;n por la baja de ese rango. Este resultado tiene sentido, ya que solo hay 62 pistas con 90 puntos de popularidad o m&aacute;s, teniendo el corte de popularidad de las 10.000 pistas m&aacute;s escuchadas en 70 puntos.</span></p><ol class="c111 lst-kix_bb6zclht20iv-0" start="3"><li class="c35 c63 li-bullet-0"><h5 id="h.fmjn68dt7egq" style="display:inline"><span class="c7">Metodolog&iacute;a</span></h5></li></ol><h6 class="c35 c50" id="h.2ehx0x7gokjs"><span class="c7">3.1. An&aacute;lisis simple</span></h6><p class="c35"><span class="c17 c12">Para abordar nuestra pregunta central de investigaci&oacute;n, primero debemos determinar si las variables de audio presentes en nuestro conjunto de datos mantienen alguna relaci&oacute;n con la variable de inter&eacute;s, la popularidad. Antes de avanzar hacia un an&aacute;lisis m&aacute;s elaborado, es importante obtener informaci&oacute;n preliminar sobre nuestros datos, lo que tambi&eacute;n nos permitir&aacute; verificar si estos hallazgos iniciales coinciden o difieren de lo reportado en estudios previos. Con este prop&oacute;sito, optamos por aplicar una regresi&oacute;n lineal m&uacute;ltiple. Este m&eacute;todo estad&iacute;stico permite evaluar si existe una relaci&oacute;n entre m&uacute;ltiples variables independientes y una variable dependiente, constituyendo as&iacute; una extensi&oacute;n de la regresi&oacute;n lineal simple. La expresi&oacute;n matem&aacute;tica correspondiente es la siguiente:</span></p><p class="c86"><span class="c42 c43 c82">&#119884; = &#120573;&#8320; + &#120573;&#8321;&#119909;&#8321; + &#120573;&#8322;&#119909;&#8322; + &#8943; &#120573;&#8345;&#119909;&#8345; + &#120576;</span></p><p class="c35"><span class="c12 c82">Tenemos la Y, que es la variable dependiente, &#120573;&#8320; la constante, &#120573;&#8345; que son los coeficientes de las variables independientes, y &#119909;&#8345;, que son las variables independientes. Este modelo tiene como objetivo reducir los errores cuadr&aacute;ticos ajustando una l&iacute;nea lineal a trav&eacute;s de los datos, con un proceso denominado OLS (ordinary least squares, m&iacute;nimos cuadrados ordinarios), asumiendo que la relaci&oacute;n entre las variables es lineal (Echambadi &amp; Hess, 2007). Para tener una visi&oacute;n general &oacute;ptima de todas las variables, incluimos todas ellas para evaluar su relaci&oacute;n con la popularidad, en nuestro caso todas las variables num&eacute;ricas del anterior punto. La </span><span class="c12 c82 c32">Tabla 3</span><span class="c12 c82">&nbsp;muestra los resultados de la f&oacute;rmula denominada, siendo </span><span class="c12 c32 c82">popularity</span><span class="c12 c82">&nbsp;la variable dependiente (Anexo 2):</span></p><table class="c123"><tr class="c116"><td class="c87" colspan="1" rowspan="1"><p class="c10 c45"><span class="c17 c29"></span></p></td><td class="c74" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Coeficiente Error</span></p></td><td class="c138" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Error Est&aacute;ndar</span></p></td></tr><tr class="c121"><td class="c88 c107" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">const</span></p></td><td class="c51" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">63,769***</span></p></td><td class="c79" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,198)</span></p></td></tr><tr class="c124"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">explicit</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,857***</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,052)</span></p></td></tr><tr class="c101"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">key</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,001</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,005)</span></p></td></tr><tr class="c121"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">mode</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,066*</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,040)</span></p></td></tr><tr class="c101"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">danceability</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,513***</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,148)</span></p></td></tr><tr class="c101"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">loudness</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">0,026***</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,006)</span></p></td></tr><tr class="c114"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">speechiness</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-3,792***</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,204)</span></p></td></tr><tr class="c116"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">energy</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,457***</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,153)</span></p></td></tr><tr class="c127"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">valence</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,264***</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,096)</span></p></td></tr><tr class="c77"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">acousticness</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,874***</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,090)</span></p></td></tr><tr class="c125"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">tempo</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,001**</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,001)</span></p></td></tr><tr class="c89"><td class="c80" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">instrumentalness</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-1,400***</span></p></td><td class="c85" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,106)</span></p></td></tr><tr class="c70"><td class="c80 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c27 c32">liveness</span></p></td><td class="c73" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">-0,821***</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">(0,124)</span></p></td></tr></table><p class="c86"><span class="c24 c33">Tabla 3. Resultados de la l&iacute;nea de regresi&oacute;n.</span></p><p class="c35"><span class="c17 c12">Los resultados de la regresi&oacute;n lineal m&uacute;ltiple muestran un bajo poder explicativo (R&sup2; = 0.014), lo que indica que las caracter&iacute;sticas ac&uacute;sticas analizadas explican solo una peque&ntilde;a parte de la variabilidad en la popularidad de las canciones.</span></p><p class="c35"><span class="c12">Vemos algunas perspectivas interesantes, ya que vemos algunas diferencias con las pruebas sin modelo descritas en la secci&oacute;n anterior. Podemos ver en la tabla que los coeficientes m&aacute;s significativos y mayor impacto son </span><span class="c12 c32">speechiness, acousticness</span><span class="c12">&nbsp;y </span><span class="c12 c32">instrumentalness</span><span class="c12">, todos con efecto negativo, </span><span class="c12">sugiriendo que las canciones m&aacute;s habladas, instrumentales y ac&uacute;sticas tienden a afectar negativamente </span><span class="c12">a la popularidad de las pistas. La mayor diferencia la marca el coeficiente de </span><span class="c12 c32">speechiness</span><span class="c12">, ya que un aumento de 1 punto en la capacidad de hablar conduce, en promedio, a una reducci&oacute;n de casi 4 puntos en la popularidad. Adem&aacute;s, si una canci&oacute;n es m&aacute;s instrumental y es m&aacute;s ac&uacute;stica, la popularidad se reduce en 1,4 y 0,8 puntos, respectivamente. Las variables de </span><span class="c12 c32">danceability, energy, valence</span><span class="c12">&nbsp;y </span><span class="c12 c32">liveness</span><span class="c12">&nbsp;tienen coeficientes negativos pero moderados, lo que hace que afectan negativamente a la popularidad pero en menor nivel. Hay dos variables, </span><span class="c12 c32">key</span><span class="c12">&nbsp;(0,001) y </span><span class="c12 c32">tempo</span><span class="c12">&nbsp;(-0,001) que tienen un efecto casi nulo, estando tan cerca del 0. Las tres variables que afectan positivamente a la popularidad son </span><span class="c12 c32">explicit, loudness </span><span class="c12">y</span><span class="c12 c32">&nbsp;mode</span><span class="c12">, que aunque no sea un n&uacute;mero muy grande, son las &uacute;nicas con coeficiente positivo, de estas las que afecta m&aacute;s a nuestra variable principal es </span><span class="c12 c32">explicit</span><span class="c17 c12">. </span></p><p class="c35"><span class="c17 c12">La regresi&oacute;n lineal m&uacute;ltiple puede resultar muy &uacute;til para realizar un an&aacute;lisis exploratorio inicial, ya que ofrece resultados inmediatos y facilita interpretaciones directas. No obstante, aplicar este m&eacute;todo a cualquier conjunto de datos, y particularmente al que estamos analizando, presenta ciertas limitaciones. En primer lugar, la regresi&oacute;n lineal no gestiona adecuadamente los datos desbalanceados. En nuestro caso, aunque no existen valores ausentes, tenemos un conjunto de datos entre los 55 y 100 puntos de popularidad, lo cual puede perjudicar la capacidad del modelo para identificar con precisi&oacute;n las relaciones entre variables, ya que no tenemos el rango entero entre 0 y 100. Adicionalmente, el conjunto de datos incluye canciones publicadas en distintos a&ntilde;os y per&iacute;odos, cuyas caracter&iacute;sticas no son directamente comparables al mismo nivel, algo que la regresi&oacute;n lineal asume por defecto. Por ejemplo, si ocurren cambios significativos en los patrones de consumo musical a lo largo del tiempo, la regresi&oacute;n lineal no los considera en su estimaci&oacute;n (Detienne et al., 2003).</span></p><p class="c35"><span class="c17 c12">En la siguiente secci&oacute;n presentaremos algunos m&eacute;todos que podr&iacute;an ser utilizados para responder a nuestras principales preguntas de investigaci&oacute;n. Describiremos las ventajas y desventajas de cada uno y, al final, elegiremos el m&aacute;s adecuado para nuestro conjunto de datos y nuestra investigaci&oacute;n.</span></p><h6 class="c35 c50" id="h.cm4m2y92202w"><span class="c7">3.2. M&eacute;todos Candidatos</span></h6><p class="c35"><span class="c33 c72 c32">ARIMA</span></p><p class="c35"><span class="c17 c12">ARIMA, Autoregressive Integrated Moving Average o Media M&oacute;vil Integrada Autorregresiva, es una familia de modelos que explica el comportamiento de una serie temporal a partir de sus propios valores pasados dados por los retrasos (autorregresivos) y de los errores retrasados (media m&oacute;vil), considerando adem&aacute;s la estacionariedad que se logra mediante diferenciaci&oacute;n, operaci&oacute;n inversa a la integraci&oacute;n. Dicho de otro modo, ARIMA parte del supuesto de que la serie temporal puede describirse mediante las autocorrelaciones presentes en los datos, sin depender directamente de tendencias o patrones estacionales. El modelo est&aacute; dividido en tres partes. Autoregressive (AR) representa la relaci&oacute;n dependiente entre una observaci&oacute;n y un n&uacute;mero determinado de observaciones retrasadas. Integrated (I) se refiere a hacer que la serie temporal sea estacionaria, es decir, una serie temporal cuyas propiedades estad&iacute;sticas (media, mediana, etc.) no var&iacute;an con el tiempo. Y el Moving Average (MA) se refiere al modelo que utiliza la dependencia entre una observaci&oacute;n y un error residual de un modelo de media m&oacute;vil aplicado a observaciones retardadas (Students of PhD at the Asian Institute of Management, 2020).</span></p><p class="c35"><span class="c17 c12">ARIMA hace un excelente trabajo a la hora de comprender los datos de series temporales y extraer informaci&oacute;n valiosa sobre las tendencias futuras, lo cual es muy importante para comprender hacia d&oacute;nde se dirigen las tendencias. Sin embargo, el modelo no es adecuado para nuestra investigaci&oacute;n, ya que no identifica cu&aacute;les son las variables m&aacute;s importantes.</span></p><p class="c35"><span class="c72 c32">Balanced Random Forest</span></p><p class="c35"><span class="c17 c12">Como proponen Chen, Liaw y Breiman (2004) el m&eacute;todo tradicional, Random Forest, se puede sufrir la maldici&oacute;n de aprender a partir de un conjunto de datos de entrenamiento extremadamente desequilibrado. Dado que est&aacute; dise&ntilde;ado para minimizar la tasa de error global, tender&aacute; a centrarse m&aacute;s en la precisi&oacute;n de la predicci&oacute;n de la clase mayoritaria, lo que a menudo da lugar a una precisi&oacute;n deficiente para la clase minoritaria. Los &aacute;rboles de decisi&oacute;n aleatorios equilibrados introducen modificaciones en el criterio de divisi&oacute;n teniendo en cuenta el desequilibrio de clases, con una combinaci&oacute;n de sobre muestreo aleatorio de la clase minoritaria en cada nodo de decisi&oacute;n. El m&eacute;todo Balanced Random Forest (BRF) es un algoritmo de aprendizaje autom&aacute;tico utilizado para tareas de clasificaci&oacute;n y regresi&oacute;n, que consiste en un conjunto de &aacute;rboles de decisi&oacute;n. Los &aacute;rboles de decisi&oacute;n son estructuras similares a diagramas de flujo en las que los nodos internos representan caracter&iacute;sticas, las ramas representan reglas de decisi&oacute;n y los nodos finales representan etiquetas de clase o valores de salida. Los bosques aleatorios mejoran la precisi&oacute;n al combinar muchos &aacute;rboles de decisi&oacute;n. Cada &aacute;rbol se entrena con un subconjunto aleatorio de datos y un subconjunto aleatorio de caracter&iacute;sticas, y la predicci&oacute;n final en un bosque aleatorio se obtiene agregando las predicciones individuales de todos los &aacute;rboles de decisi&oacute;n (Ali et al., 2012).</span></p><p class="c35"><span class="c17 c12">Esta t&eacute;cnica abordar&aacute; el problema de contar con una clase predominantemente mayor que las dem&aacute;s; en nuestro caso, el elevado n&uacute;mero de canciones con un valor de popularidad igual a 55. No obstante, los bosques aleatorios balanceados no son especialmente apropiados para trabajar con datos de series temporales. Esto implica que no capturan de manera expl&iacute;cita las variaciones de tendencia a lo largo del tiempo, aspecto que resulta relevante al analizar canciones publicadas durante un periodo de 15 a&ntilde;os. La raz&oacute;n es que este m&eacute;todo trata cada observaci&oacute;n de forma independiente, sin considerar las posibles correlaciones temporales entre ellas.</span></p><p class="c35"><span class="c33 c72 c32">LightGBM</span></p><p class="c35"><span class="c17 c12">LightGBM es una implementaci&oacute;n de &aacute;rboles de decisi&oacute;n potenciados por gradiente (gradient boosted decision trees, GBDT), lo que significa que es un modelo que utiliza aprendices m&aacute;s d&eacute;biles, en este caso &aacute;rboles de decisi&oacute;n, para crear un modelo conjunto m&aacute;s fuerte. El framework comienza con un modelo inicial (clasificador d&eacute;bil) que se entrena con los datos. A partir de este, se calculan las diferencias entre los valores observados y las predicciones generadas, que representan los errores que el modelo no logr&oacute; capturar. El algoritmo de descenso de gradiente se encarga de identificar la mejor direcci&oacute;n para optimizar el modelo, determinando c&oacute;mo deben ajustarse las predicciones para minimizar dichos errores. En cada iteraci&oacute;n se incorporan nuevos clasificadores base, pero ahora son entrenados para predecir el gradiente negativo de la funci&oacute;n de p&eacute;rdida en lugar de los valores originales, buscando as&iacute; reducir los residuos acumulados. Al final, todas estas predicciones se combinan para conformar el modelo conjunto, el cual se emplea para realizar predicciones sobre datos nuevos. Estas predicciones se ponderan seg&uacute;n el desempe&ntilde;o de cada clasificador durante el entrenamiento. Para prevenir el sobreajuste, el algoritmo incorpora t&eacute;cnicas de regularizaci&oacute;n como la reducci&oacute;n de la tasa de aprendizaje (shrinkage) y el submuestreo de caracter&iacute;sticas, mecanismos que controlan la influencia de cada clasificador d&eacute;bil en el modelo final (Ke et al., 2017).</span></p><p class="c35"><span class="c17 c12">LightGBM pertenece a la familia de algoritmos de impulso por gradiente (gradient boosting), que incluye otros frameworks conocidos como XGBoost y AdaBoost. LightGBM comparte numerosas ventajas con XGBoost, tales como la optimizaci&oacute;n dispersa, el entrenamiento en paralelo, el soporte de m&uacute;ltiples funciones de p&eacute;rdida, la regularizaci&oacute;n, el bagging y la detenci&oacute;n anticipada (early stopping). Como mencionan Ke, Meng, Finley y otros (2017), la principal distinci&oacute;n entre ambos m&eacute;todos reside en la forma de construir los &aacute;rboles. Mientras que XGBoost crece nivel por nivel (depth-wise), LightGBM utiliza una estrategia de crecimiento hoja por hoja (leaf-wise), seleccionando en cada paso la hoja que, seg&uacute;n el algoritmo, generar&aacute; la mayor reducci&oacute;n en la p&eacute;rdida. Adem&aacute;s, LightGBM no busca el mejor punto de divisi&oacute;n recorriendo todos los valores ordenados de las caracter&iacute;sticas, sino que implementa un algoritmo basado en histogramas altamente optimizado para el aprendizaje de &aacute;rboles de decisi&oacute;n, lo que aporta importantes ventajas tanto en eficiencia computacional como en uso de memoria.</span></p><p class="c35"><span class="c17 c12">LightGBM resulta un m&eacute;todo apropiado para nuestro an&aacute;lisis por diversas razones. En primer lugar, est&aacute; dise&ntilde;ado para trabajar eficazmente con datos desbalanceados. El m&eacute;todo asigna pesos mayores a las clases minoritarias y menores a las mayoritarias, compensando as&iacute; cualquier desequilibrio en la distribuci&oacute;n. Adem&aacute;s, permite implementar bagging balanceado, que ajusta la distribuci&oacute;n de clases en cada iteraci&oacute;n, y su algoritmo asigna gradientes m&aacute;s elevados a las observaciones mal clasificadas de la clase minoritaria, facilitando que el modelo capture mejor los patrones caracter&iacute;sticos de dicha clase.</span></p><p class="c35"><span class="c33 c32 c72">Regresi&oacute;n LASSO</span></p><p class="c35"><span class="c17 c12">LASSO (Least Absolute Shrinkage and Selection Operator) es una t&eacute;cnica de regresi&oacute;n lineal que realiza la selecci&oacute;n de variables y la regularizaci&oacute;n, y se introdujo originalmente para abordar las limitaciones de la regresi&oacute;n lineal tradicional, espec&iacute;ficamente cuando se trata de manejar grandes conjuntos de datos con muchas observaciones. La regresi&oacute;n LASSO minimiza la suma de los errores al cuadrado a&ntilde;adiendo un t&eacute;rmino de penalizaci&oacute;n adicional, seg&uacute;n la f&oacute;rmula:</span></p><p class="c86"><img src="images/image1.png"></p><p class="c35"><span class="c12">donde &#119910; es el vector de valores observados de la variable dependiente, &#119909; es la variable predictora, &#120573; es el vector de coeficientes que se va a estimar, &#120582; es el par&aacute;metro que regula la fuerza del t&eacute;rmino de penalizaci&oacute;n, y </span><img src="images/image2.png"><span class="c17 c12">&nbsp;representa la suma de los valores absolutos de los coeficientes. El t&eacute;rmino de penalizaci&oacute;n reduce algunos de los coeficientes hacia 0, lo que da como resultado que algunos de los predictores sean exactamente cero y, por lo tanto, se excluyan del modelo. Este proceso se conoce como selecci&oacute;n de variables. El t&eacute;rmino de penalizaci&oacute;n impone una restricci&oacute;n a la magnitud de los coeficientes. A medida que &#120582; aumenta, m&aacute;s coeficientes se reducen a cero, lo que da lugar a un modelo m&aacute;s simple con menos predicciones (Tibshirani, 1996).</span></p><p class="c35"><span class="c17 c12">LASSO es un m&eacute;todo de f&aacute;cil interpretaci&oacute;n y capaz de procesar grandes vol&uacute;menes de datos. Se ajusta a nuestro objetivo porque elimina autom&aacute;ticamente las variables que considera irrelevantes, en este caso aquellas que no contribuyen a aumentar o disminuir la popularidad. Al hacerlo, tambi&eacute;n puede capturar diferencias temporales y evidenciar si el momento de publicaci&oacute;n tiene influencia o no, siempre que se realice un pre procesamiento adecuado de los datos (Tibshirani, 1996). Sin embargo, la limitaci&oacute;n de este modelo en nuestro contexto es que no maneja eficientemente los datos desbalanceados. A diferencia de LightGBM y los &aacute;rboles de decisi&oacute;n balanceados, donde la ponderaci&oacute;n de clases se aplica de forma autom&aacute;tica, en LASSO tendr&iacute;amos que implementar manualmente dicha ponderaci&oacute;n, lo que a&ntilde;ade complejidad y reduce su idoneidad para nuestras necesidades espec&iacute;ficas.</span></p><h6 class="c35 c50" id="h.v2sc0k5vcskn"><span class="c7">3.3. Tabla res&uacute;men de los m&eacute;todos</span></h6><p class="c35"><span class="c12">La </span><span class="c12 c32">Tabla 4</span><span class="c17 c12">&nbsp;ense&ntilde;a un resumen de los m&eacute;todos reci&eacute;n descritos, estos son adecuados para nuestra principal pregunta y abordan el problema que ten&iacute;amos con la regresi&oacute;n linear.</span></p><table class="c96"><tr class="c59"><td class="c98" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Modelo</span></p></td><td class="c98" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Desequilibrio de clases</span></p></td><td class="c136" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Viabilidad</span></p></td><td class="c118" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Interpretabilidad</span></p></td><td class="c136" colspan="1" rowspan="1"><p class="c10"><span class="c17 c27">Efectos de interacci&oacute;n</span></p></td></tr><tr class="c59"><td class="c83" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">ARIMA</span></p></td><td class="c88 c135" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">No apto</span></p></td><td class="c88 c99" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Requiere preprocesamiento de datos</span></p></td><td class="c75" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">No apto</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Si</span></p></td></tr><tr class="c59"><td class="c52" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">Balanced Random Forest</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Apto</span></p></td><td class="c91" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Muy f&aacute;cil de implementar y ejecutar</span></p></td><td class="c108" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Muy f&aacute;cil</span></p></td><td class="c91" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Si</span></p></td></tr><tr class="c59"><td class="c52 c88" colspan="1" rowspan="1"><p class="c10"><span class="c33 c29 c32">LightGBM</span></p></td><td class="c88 c130" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Apto</span></p></td><td class="c88 c112" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">F&aacute;cil de implementar y ejecutar</span></p></td><td class="c88 c94" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Depende de la complejidad del modelo</span></p></td><td class="c88 c90" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Si</span></p></td></tr><tr class="c59"><td class="c52" colspan="1" rowspan="1"><p class="c10"><span class="c29 c32 c33">LASSO</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">No apto</span></p></td><td class="c91" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">M&aacute;s complejo debida al procesamiento de datos</span></p></td><td class="c108" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">F&aacute;cil</span></p></td><td class="c91" colspan="1" rowspan="1"><p class="c10"><span class="c17 c29">Si</span></p></td></tr></table><p class="c44"><span class="c24">Tabla 4. Comparaci&oacute;n de los m&eacute;todos candidatos para el an&aacute;lisis principal.</span></p><h6 class="c35 c50" id="h.udurz4qhwqdq"><span class="c7">3.4. Selecci&oacute;n del modelo</span></h6><p class="c35"><span class="c12">Despu&eacute;s de comparar los cuatro modelos anteriores, usaremos </span><span class="c12">LightGBM</span><span class="c12">&nbsp;para nuestro an&aacute;lisis. Es el modelo que mejor </span><span class="c12">destacar&aacute;</span><span class="c17 c12">&nbsp;las variables que m&aacute;s afectan a la popularidad, ya que este es el principal objetivo de la investigaci&oacute;n. Mientras se cumple esto, tambi&eacute;n tendr&aacute; en cuenta otros factores como los datos desequilibrados, estando dise&ntilde;ado para este tipo de desequilibrios, en este caso se ocupar&aacute; del hecho de que hay muchas observaciones con un valor de popularidad de 55. Por &uacute;ltimo, dado que la relaci&oacute;n entre las caracter&iacute;sticas ac&uacute;sticas y la popularidad musical puede ser no lineal y presentar interacciones complejas, este es el m&eacute;todo que mejor se adapta, permitiendo capturar dichas relaciones sin imponer supuestos funcionales estrictos, mejorando la capacidad predictiva al respecto a modelos lineales.</span></p><p class="c35"><span class="c17 c12">El modelo ser&aacute; implementado de la siguiente forma. Primero, prepararemos los datos dividiendo los datos en train y test splits, siendo necesario para evaluar el rendimiento del modelo. Los datos se transformar&aacute;n al formato &ldquo;lgb.Dataset&rdquo;, que es el formato preferido para LightGBM, ya que est&aacute; optimizado tanto para la eficiencia de la memoria &nbsp;como para la velocidad de entrenamiento. El modelo tiene un conjunto de par&aacute;metros, como el n&uacute;mero de rondas de refuerzo y las rondas de detenci&oacute;n temprana. Para asegurarnos de obtener los mejores resultados, necesitamos ajustar estos par&aacute;metros, lo que podremos hacer probando muchas combinaciones diferentes en el propio conjunto de datos. Una vez obtenidos los resultados del modelo, generamos el gr&aacute;fico de importancia de caracter&iacute;sticas, lo que nos proporcionar&aacute; una visualizaci&oacute;n clara de las variables relevantes y nos ayudar&aacute; a dar respuesta a la pregunta central de investigaci&oacute;n de este trabajo. Posteriormente, exploramos los efectos de interacci&oacute;n para identificar si existen otras variables que act&uacute;an como moderadoras en la relaci&oacute;n entre la popularidad y las variables principales que influyen en su valor (Anexo 3). </span></p><p class="c35"><span class="c12">A parte de todos los pasos anteriores sobre la utilizaci&oacute;n del modelo </span><span class="c12">LightGBM</span><span class="c17 c12">, sus gr&aacute;ficos e interpretar los resultados con SHAP, iremos un paso m&aacute;s all&aacute; con una simulaci&oacute;n contrafactual creando un modelo predictivo, empleando machine learning. Primero crearemos canciones aleatorias ficticias, con el motivo de poner a prueba nuestro modelo predictivo. Con el modelo entrenado de LightGBM anteriormente, haremos la predicci&oacute;n de la popularidad predicha de nuestras canciones simuladas, descargandolas en un CSV para poder visualizar las canciones, sus variables y la popularidad predicha (Anexo 4). Todo esto se presentar&aacute; con mayor detalle en el apartado siguiente, correspondiente a los resultados.</span></p><ol class="c111 lst-kix_bb6zclht20iv-0" start="4"><li class="c110 li-bullet-1"><h5 id="h.8vy4o1ouubrj" style="display:inline"><span class="c7">Resultados</span></h5></li></ol><h6 class="c44 c50" id="h.z9lec5p427oi"><span class="c7">4.1. An&aacute;lisis principal</span></h6><p class="c35"><span class="c12">El modelo </span><span class="c12">LightGBM</span><span class="c12">&nbsp;nos ayuda a se&ntilde;alar la importancia de cada una de las variables analizadas, haciendo un ranking de &eacute;stas mismas, como ense&ntilde;a la </span><span class="c12 c32">Figura 1</span><span class="c17 c12">, siendo necesario para saber cu&aacute;les de estas caracter&iacute;sticas tendremos en cuenta para comprender qu&eacute; es lo que impulsa la popularidad de las canciones. </span></p><p class="c86"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 325.91px; height: 243.79px;"><img alt="" src="images/image9.jpg" style="width: 325.91px; height: 243.79px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c86"><span class="c24">Figura 1. Clasificaci&oacute;n de importancia de las caracter&iacute;sticas.</span></p><p class="c35"><span class="c12">Por otro lado, la </span><span class="c12 c32">Figura 2</span><span class="c17 c12">&nbsp;muestra los valores SHAP de las variables de nuestro modelo de LightGBM, los cuales utilizaremos para comprender cu&aacute;les de los predictores relevantes tienen un efecto positivo en la popularidad. Un valor positivo significa que los predictores tienen un efecto positivo en las predicciones, en este caso en el valor de la popularidad, y, a la inversa, los negativos tienen un efecto negativo.</span></p><p class="c86"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 326.91px; height: 257.35px;"><img alt="" src="images/image5.jpg" style="width: 326.91px; height: 257.35px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c86"><span class="c24">Figura 2. Valores SHAP del modelo LightGBM.</span></p><p class="c35"><span class="c12">El gr&aacute;fico SHAP muestra la importancia global de cada variable, calculada como la media del valor absoluto de los valores SHAP, facilitando la compresi&oacute;n directa entre caracter&iacute;sticas. Viendo el gr&aacute;fico, podemos apreciar que las variables que tienen un efecto positivo sobre </span><span class="c12 c32">popularity</span><span class="c12">&nbsp;son todas, esto no es algo normal, es debido a que nuestro conjunto de datos tiene un rango de popularidad popularidad de 55 puntos o mayor, por lo que vamos a centrarnos en las que tienen el SHAP del 20% o mayor que ser&iacute;an </span><span class="c12 c32">loudness, explicit, speechiness </span><span class="c12">y</span><span class="c12 c32">&nbsp;energy</span><span class="c12">. Podemos comprobar que los resultados son diferentes a los del modelo de regresi&oacute;n lineal, donde solo ten&iacute;amos positivas </span><span class="c12 c32">explicit, loudness </span><span class="c12">y</span><span class="c12 c32">&nbsp;mode</span><span class="c12">, aunque las dos primeras son iguales, vemos que </span><span class="c12 c32">mode</span><span class="c12">&nbsp;en con SHAP est&aacute; el &uacute;ltimo. Y en el caso de </span><span class="c12 c32">explicit</span><span class="c12">&nbsp;y</span><span class="c12 c32">&nbsp;loudness</span><span class="c12">&nbsp;se han intercambiado puestos, mientras con el primer m&eacute;todo </span><span class="c12 c32">explicit</span><span class="c12">&nbsp;era la que m&aacute;s positivamente afectaba, ahora lo es </span><span class="c12 c32">loudness</span><span class="c12">&nbsp;con m&aacute;s de 5% de diferencia. Otro caso a tener en cuenta es el de </span><span class="c12 c32">speechiness</span><span class="c17 c12">, con el m&eacute;todo de regresi&oacute;n linear era el la variable que m&aacute;s negativamente afectaba a la popularidad, ahora es la tercera que mejor la afecta. Con este an&aacute;lisis podemos ver lo importante que es elegir un buen m&eacute;todo para nuestro tipo de datos.</span></p><h6 class="c35 c50" id="h.3axojkbl9ma5"><span class="c7">4.2. Modelo predictor</span></h6><p class="c35"><span class="c12">Con el modelo de machine learning, lo que se quiere conseguir es predecir c&oacute;mo de popular puede ser una canci&oacute;n antes de que salga en las plataformas, en este caso Spotify. Nosotros lo que hemos hecho en este punto, como no tenemos canciones reales que una discogr&aacute;fica, es crear unas canciones simuladas, con ayuda del m&eacute;todo LightGBM entrenado del punto anterior, permitiendo simular la popularidad esperada de nuevas producciones musicales en funci&oacute;n de sus caracter&iacute;sticas ac&uacute;sticas. Una vez generadas 100 pistas ficticias ejecutamos el modelo predictivo y su popularidad predicha. Con este tipo de modelo predictor, una discogr&aacute;fica podr&iacute;a coger una canci&oacute;n antes de lanzamiento y con sus variables iguales que las de Spotify, predecir c&oacute;mo de popular va a ser &eacute;sta. Al igual que una canci&oacute;n reci&eacute;n o ya sacada en Spotify y hacer la predicci&oacute;n. Esta forma de actuar ser&iacute;a muy buena si lo que busca la discogr&aacute;fica o el mismo artista es que su canci&oacute;n sea el pr&oacute;ximo &ldquo;hit&rdquo;.</span></p><ol class="c111 lst-kix_bb6zclht20iv-0" start="5"><li class="c35 c66 li-bullet-2"><h5 id="h.bw1f4ewxhdhz" style="display:inline"><span class="c7">Conclusi&oacute;n</span></h5></li></ol><h6 class="c35 c50" id="h.5jec0bqv34yl"><span class="c7">5.1. Resumen de la investigaci&oacute;n</span></h6><p class="c35"><span class="c17 c12">En este trabajo nos hemos enfocado en el objetivo principal de saber qu&eacute; hace a una canci&oacute;n popular. El &aacute;ngulo sobre el que hemos realizado el an&aacute;lisis son los elementos ac&uacute;sticos por la anatom&iacute;a de una canci&oacute;n. Las contribuciones aportadas son tanto empresariales como acad&eacute;micas, entendiendo qu&eacute; hace a una canci&oacute;n popular es importante para un negocio en la industria musical, como una discogr&aacute;fica o artista, y les puede ayudar a realizar decisiones que resulten m&aacute;s rentables sobre el lanzamientos de canciones, &aacute;lbumes o incluso artistas. </span></p><p class="c35"><span class="c17 c12">Los elementos analizados son variables basadas en audio, que pueden ser vinculadas con el estado de &aacute;nimo, con las propiedades y con el contexto de las canciones (Spotify for Developers, 2025). Los datasets utilizados fueron descargados por Anna&#39;s Archive (2025) mediante la API de Spotify, la cual habilita la posibilidad de acceder a las databases de canciones, &aacute;lbumes y podcasts. Los datasets obtenidos gracias a Anna&rsquo;s Archive eran de la totalidad de canciones de Spotify, desde el 2010 hasta julio de 2025, un total de m&aacute;s de 256 millones de pistas. Estos fueron acortadas a las 100.000 m&aacute;s populares de esa lista, limpiadas para eliminar las pistas sin caracter&iacute;sticas ac&uacute;sticas y unidos para tener las variables necesarias para nuestro an&aacute;lisis en un solo dataset, qued&aacute;ndonos con casi 99.000 pistas. </span></p><p class="c35"><span class="c12">Empezamos haciendo el m&eacute;todo de regresi&oacute;n lineal, donde las variables m&aacute;s importantes fueron </span><span class="c12 c32">explicit</span><span class="c12">&nbsp;y </span><span class="c12 c32">loudness</span><span class="c12">, siendo las dos variables positivas m&aacute;s altas, es decir, que m&aacute;s afectan a la popularidad de una canci&oacute;n. Con este m&eacute;todo nos dimos cuenta que no era la mejor idea para nuestro an&aacute;lisis, as&iacute; que comparamos cuatro m&eacute;todos candidatos, reflejados en la </span><span class="c12 c32">Tabla 4</span><span class="c12">, y nos decantamos por usar el m&eacute;todo de machine learning LightGBM ya que es el que mejor se adapta a nuestro an&aacute;lisis, ayud&aacute;ndonos tambi&eacute;n de SHAP. En estos encontramos que las variables que mejor afectan a la popularidad son l</span><span class="c12 c32">oudness, speechiness, energy </span><span class="c12">y</span><span class="c12 c32">&nbsp;explicit</span><span class="c17 c12">. </span></p><h6 class="c35 c50" id="h.rg4prtvu3i09"><span class="c7">5.2. Interpretaci&oacute;n de los resultados</span></h6><p class="c35"><span class="c12">La variable que hemos encontrado m&aacute;s importante en este trabajo es </span><span class="c12 c32">loudness</span><span class="c17 c12">, ya que en todos los m&eacute;todos utilizados es la &uacute;nica siempre ha tenido una relaci&oacute;n positiva con la popularidad, lo que quiere decir que las canciones que son grabadas con un sonido m&aacute;s fuerte tienden a ser m&aacute;s populares, al menos con este dataset. Esta ha sido la tendencia en las &uacute;ltimas d&eacute;cadas, apareciendo el t&eacute;rmino &ldquo;loudness war&rdquo; que hace referencia a que en los &uacute;ltimos 60 a&ntilde;os las discogr&aacute;ficas han competido para hacer las canciones con un sonido m&aacute;s fuerte, a menudo reduciendo el rango din&aacute;mico con compresi&oacute;n (Bunning, 2018). &nbsp;Este fen&oacute;meno se debe a varios factores. Por una parte, los vinilos tienen l&iacute;mites f&iacute;sicos, los surcos m&aacute;s profundos del disco requieren m&aacute;s espacio y reducen el n&uacute;mero de canciones que caben en cada una de sus caras, por lo que el vinilo impuso un l&iacute;mite pr&aacute;ctico al vol&uacute;men hasta la llegada de los m&eacute;todos digitales. Cuando llegaron &eacute;ste tipo de formato, los ingenieros musicales acercaron los niveles medios al l&iacute;mite, utilizando la compresi&oacute;n para aumentar el volumen medio. Y en los &uacute;ltimos a&ntilde;os con las plataformas digitales, no hay l&iacute;mites, y las canciones con un sonido m&aacute;s fuerte tienden a ser m&aacute;s populares (Bunning, 2018).</span></p><p class="c35"><span class="c12">La otra variable con mayor peso positivo en los modelos es </span><span class="c12 c32">energy</span><span class="c12">, siendo canciones con mayor emoci&oacute;n e intensidad f&iacute;sica, sinti&eacute;ndose r&aacute;pidas, fuertes y ruidosas. Como plantea Kim (2021) esto ya fue tendencia entre 2011 y 2015, donde las canciones muy energ&eacute;ticas estaban muy relacionadas con la popularidad. Tambi&eacute;n se sugiere, que las caracter&iacute;sticas </span><span class="c12 c32">loudness</span><span class="c12">&nbsp;y </span><span class="c12 c32">energy</span><span class="c17 c12">&nbsp;van muy de la mano, al igual que pasa en nuestro an&aacute;lisis. Las dos variables van muy de la mano junto con los latidos por minuto (&ldquo;beats per minute&rdquo;, bpm) de una canci&oacute;n, debido a que las personas sentimos m&aacute;s energ&iacute;a con unos bpm m&aacute;s altos, y latidos y sonidos m&aacute;s fuertes (Kim, 2021).</span></p><h5 class="c35 c50" id="h.uhbn93fzvjew"><span class="c7">5.3. Implicaciones directivas</span></h5><p class="c35"><span class="c17 c12">Hay muchos tipos de personas que trabajan en la industria musical para las que los resultados de esta investigaci&oacute;n tienen implicaciones y valor. Las principales son los ejecutivos musicales, los artistas, los productores y las plataformas de streaming, como Spotify. </span></p><p class="c35"><span class="c17 c12">No existe una f&oacute;rmula puramente t&eacute;cnica para crear un &eacute;xito musical, ya que el rendimiento de una canci&oacute;n depende en gran medida de la marca del artista, el marketing que emplee su discogr&aacute;fica para &eacute;l/ella, la inclusi&oacute;n en las listas por parte de las plataformas de streaming, las tendencias culturales y las redes sociales. Existen artistas que saquen lo que saquen, va a ser popular, como lo puede ser Taylor Swift o Harry Styles, teniendo ya un grupo de fans dedicados es muy f&aacute;cil para ellos llegar a las listas de &eacute;xitos y que sus canciones est&eacute;n entre las m&aacute;s escuchadas mundialmente, gracias a su imagen como artistas y el marketing empleado por sus discogr&aacute;ficas. Hablando de las redes sociales, y con la nueva generaci&oacute;n de creaci&oacute;n de contenido, muchos artistas ven sus canciones siendo &ldquo;trend&rdquo; en redes sociales y dependen de ese marketing org&aacute;nico para tener sus &ldquo;hits&rdquo;.</span></p><p class="c35"><span class="c12">Sin embargo, los modelos de machine learning como el creado en este trabajo, pueden utilizarse como herramientas de filtrado de demos, simuladores de potencial comercial, y sistemas de apoyo a decisiones de A&amp;R (Artists and Repertoire), siendo la divisi&oacute;n de las compa&ntilde;&iacute;as encargada de buscar talentos, firmar a nuevos artistas y de supervisar el desarrollo creativo. En este sentido, el an&aacute;lisis de datos no sustituye la intuici&oacute;n creativa, pero puede aportar una ventaja competitiva a la hora de tomar decisiones.</span></p><h6 class="c35 c50" id="h.iol872xrflt6"><span class="c7">5.4. Limitaciones y futuras l&iacute;neas de investigaci&oacute;n</span></h6><p class="c35"><span class="c33 c72 c32">Limitaciones del estudio</span></p><p class="c35"><span class="c17 c12">Esta investigaci&oacute;n est&aacute; centrada en los elementos que m&aacute;s contribuyen a qu&eacute; hace a una canci&oacute;n popular, por medio del an&aacute;lisis de las variables basadas en audio de Spotify. Esto provoca que toda la investigaci&oacute;n se base en la precisi&oacute;n y qu&eacute; tipo de datos el equipo de datos de Spotify genera y pone a disposici&oacute;n del p&uacute;blico, siendo un punto a tener en cuenta como una debilidad de la investigaci&oacute;n, ya que en su web no se especifica c&oacute;mo y con qu&eacute; precisi&oacute;n se generan. Adem&aacute;s contamos con una base de datos recortada a 100.000 observaciones, que puede considerarse como un tama&ntilde;o de data limitado.</span></p><p class="c35"><span class="c12 c17">Asimismo, el modelo se ha construido &uacute;nicamente con caracter&iacute;sticas ac&uacute;sticas de las canciones, dejando fuera variables estrat&eacute;gicas clave como la popularidad del artista, el n&uacute;mero de seguidores, la duraci&oacute;n y a&ntilde;os de publicaci&oacute;n de las canciones, el presupuesto de marketing y el g&eacute;nero musical. La ausencia de estos factores determinantes en el &eacute;xito comercial, explica el bajo R&sup2; observado en el modelo lineal. La popularidad de una canci&oacute;n se crea en la intersecci&oacute;n de dimensiones creativas, sociales, culturales y estrat&eacute;gicas, haciendo referencia a la naturaleza multifactorial del &eacute;xito musical. Un modelo solo basado en el audio no puede capturar plenamente esta complejidad, lo que limita la capacidad predictiva y explicativa de los resultados.</span></p><p class="c35"><span class="c12">Adem&aacute;s, la variable </span><span class="c12 c32">popularity</span><span class="c17 c12">&nbsp;de Spotify es un &iacute;ndice interno cuyo c&aacute;lculo exacto no est&aacute; en nuestras manos, haciendo que esta opacidad introduce una incertidumbre en la interpretaci&oacute;n y generalizaci&oacute;n de los hallazgos, ya que no se conoce con precisi&oacute;n como la plataforma pondera distintos factores que influyen en dicho &iacute;ndice.</span></p><p class="c35"><span class="c33 c72 c32">Futuras l&iacute;neas de investigaci&oacute;n</span></p><p class="c35"><span class="c17 c12">A partir de las limitaciones detectadas, se proponen nuevas l&iacute;neas de investigaci&oacute;n posibles. Una ser&iacute;a incorporar otro tipo de variables de la canci&oacute;n, como la fecha de lanzamiento, la duraci&oacute;n de la canci&oacute;n, el idioma o el artista. Junto con este &uacute;ltimo, se podr&iacute;an incluir los seguidores, el n&uacute;mero de reproducciones totales, o si son colaboraciones o no, lo que permitir&iacute;a distinguir el efecto &ldquo;marca del artista&rdquo; del efecto estrictamente musical. Tambi&eacute;n se podr&iacute;an analizar la inclusi&oacute;n en playlist creadas por la misma plataforma de streaming, como &ldquo;Top Hits&rdquo;, o la viabilidad en redes sociales.</span></p><p class="c35"><span class="c17 c12">Otro punto interesante a investigar es el an&aacute;lisis por g&eacute;nero musical, segmentando el estudio por g&eacute;neros (pop, rock, hip-hop, rap, o cl&aacute;sica entre otros) abrir&iacute;a un an&aacute;lisis m&aacute;s completo y ayudar&iacute;a a capturar c&oacute;mo var&iacute;a la relaci&oacute;n entre las caracter&iacute;sticas ac&uacute;sticas y la popularidad en cada estilo. Por &uacute;ltimo, analizar la evoluci&oacute;n temporal de las canciones populares, tendencias musicales, cambios en la producci&oacute;n y el impacto de nuevas plataformas o formatos, permitir&iacute;a identificar patrones din&aacute;micos y anticipar cambios en el &eacute;xito futuro.</span></p><p class="c35 c45"><span class="c17 c12"></span></p><ol class="c111 lst-kix_bb6zclht20iv-0" start="6"><li class="c117 li-bullet-3"><h5 id="h.sb982dmh5bj2" style="display:inline"><span class="c7">Bibliograf&iacute;a</span></h5></li></ol><p class="c40"><span class="c12">Ali, J., Khan, R., Ahmad, N., &amp; Maqsood, I. (2012, Septiembre). Random Forests and Decision Trees. </span><span class="c12 c32">International Journal of Computer Science Issues</span><span class="c12">, </span><span class="c12 c32">9</span><span class="c17 c12">(5), 272-278. https://ijcsi.org/papers/IJCSI-9-5-3-272-278.pdf</span></p><p class="c40"><span class="c12">Anna&#39;s Archive. (2025, December 20). </span><span class="c12 c32">Backing up Spotify</span><span class="c17 c12">. https://web.archive.org/web/20260108103928/https://annas-archive.li/torrents/spotify</span></p><p class="c40"><span class="c12">Berger, J. (2021). </span><span class="c12 c32">What Makes Songs Popular? It&rsquo;s All About &lsquo;You&rsquo;</span><span class="c17 c12">. Knowledge at Wharton. https://knowledge.wharton.upenn.edu/podcast/knowledge-at-wharton-podcast/what-makes-songs-popular-its-all-about-you/</span></p><p class="c40"><span class="c12">Borg, N., &amp; Hokkanen, G. (2011). </span><span class="c12 c32">What makes for a hit pop song?</span><span class="c17 c12">&nbsp;https://cs229.stanford.edu/proj2011/BorgHokkanen-WhatMakesForAHitPopSong.pdf</span></p><p class="c40"><span class="c12">Bunning, J. (2018, Octubre 26). The Loudness Wars. </span><span class="c12 c32">USC Illumin Magazine</span><span class="c12">, </span><span class="c12 c32">XVIII</span><span class="c17 c12">(II). https://illumin.usc.edu/the-loudness-wars/</span></p><p class="c40"><span class="c12">Chen, C., Liaw, A., &amp; Breiman, L. (2004). </span><span class="c12 c32">Using Random Forest to Learn Imbalanced Data</span><span class="c17 c12">. https://statistics.berkeley.edu/sites/default/files/tech-reports/666.pdf</span></p><p class="c40"><span class="c12">Detienne, K. B., Detienne, D. H., &amp; Joshi, S. A. (2003). Neural Networks as Statistical Tools for Business Researchers. </span><span class="c12 c32">Organizational Research Methods</span><span class="c17 c12">, (6), 236-259. https://scispace.com/pdf/neural-networks-as-statistical-tools-for-business-2vbej8a2sw.pdf</span></p><p class="c40"><span class="c12">Echambadi, R., &amp; Hess, J. D. (2007). Mean-Centering Does Not Alleviate Collinearity Problemsin Moderated Multiple Regression Models. In </span><span class="c12 c32">Marketing Science</span><span class="c17 c12">&nbsp;(pp. 438-444). INFORMS.</span></p><p class="c40"><span class="c12">Ferreri, L., Mas-Herrero, E., J. Zatorre, R., Ripoll&eacute;s, P., Gomez-Andres, A., Alicart, H., Oliv&eacute;, G., Marco-Pallar&eacute;s, J., Antonijoan, R. M., Valle, M., Riba, J., &amp; Rodriguez-Fornells, A. (2019). </span><span class="c12 c32">Dopamine modulates the reward experiences elicited by music</span><span class="c17 c12">. https://www.pnas.org/doi/full/10.1073/pnas.1811878116</span></p><p class="c40"><span class="c12">IFPI. (2023). </span><span class="c12 c32">IFPI&rsquo;s global study finds we&rsquo;re listening to more music in more ways than ever</span><span class="c17 c12">. https://www.ifpi.org/ifpis-global-study-finds-were-listening-to-more-music-in-more-ways-than-ever/</span></p><p class="c40"><span class="c12">IFPI. (2025). </span><span class="c12 c32">Global Music Report 2025</span><span class="c17 c12">. https://www.ifpi.org/wp-content/uploads/2024/03/GMR2025_SOTI.pdf</span></p><p class="c40"><span class="c12">Ke, G., Meng, Q., Finley, T., Wang, T., Chen, W., Ma, W., UE, Q., &amp; Liu, T.-Y. (2017, December). LightGBM: A Highly Efficient Gradient Boosting Decision Tree. </span><span class="c12 c32">Advances in Neural Information Processing Systems</span><span class="c12">, </span><span class="c12 c32">30</span><span class="c17 c12">.</span></p><p class="c40"><span class="c12">Kim, J. (2021, Octubre 29). Music Popularity Prediction Through Data Analysis ofMusic&rsquo;s Characteristics. </span><span class="c12 c32">nternational Journal of Science, Technology and Society</span><span class="c12">, </span><span class="c12 c32">9</span><span class="c17 c12">(5).</span></p><p class="c40"><span class="c12">Spotify for Developers. (2025). </span><span class="c12 c32">Spotify for Developers</span><span class="c17 c12">. Spotify for Developers. Retrieved 2026, from https://developer.spotify.com/community</span></p><p class="c40"><span class="c12">Statista. (2025, December 17). </span><span class="c12 c32">Spotify - statistics &amp; facts</span><span class="c17 c12">. Statista. https://www.statista.com/topics/2075/spotify/?srsltid=AfmBOoo5L6RSEOmIb_TCyuYTBSN1so960NAZ3PXgMFf6LmF4uz9GcgSE#topicOverview</span></p><p class="c40"><span class="c12">Students of PhD at the Asian Institute of Management. (2020). </span><span class="c12 c32">Chapter 1: AutoRegressive Integrated Moving Average (ARIMA)</span><span class="c17 c12">. GitHuN. https://phdinds-aim.github.io/time_series_handbook/Preface/Preface.html</span></p><p class="c40"><span class="c12">Terroso-Saenz, F., Soto, J., &amp; Mu&ntilde;oz, A. (2022). Evolution of global music trends: An exploratory and predictive approach based on Spotify data. </span><span class="c12 c32">Entertainment Computing</span><span class="c12">, </span><span class="c12 c32">44</span><span class="c17 c12">(3).</span></p><p class="c40"><span class="c12">Tibshirani, R. (1996). Regression Shrinkage and Selection via the Lasso. </span><span class="c12 c32">Journal of the Royal Statistical Society Series B: Statistical Methodology</span><span class="c12">, </span><span class="c12 c32">58</span><span class="c17 c12">(1), 267-288.</span></p><h5 class="c44 c92" id="h.jcucekg1dc7d"><span class="c7">6. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Anexos</span></h5><p class="c36"><span class="c12">Antes de meternos a los anexos, con los scripts y su desarrollo, quiero adjuntar el </span><span class="c12 c15"><a class="c4" href="https://www.google.com/url?q=https://github.com/ldurban98/TFM-LuciaDurbanRedondo&amp;sa=D&amp;source=editors&amp;ust=1771497510733894&amp;usg=AOvVaw0DzjGFH8-NhRzVynOqB7kV">link del GitHub</a></span><span class="c12">&nbsp;donde se pueden encontrar la base de datos principal con la que se desarrolla esta investigaci&oacute;n, siendo esta la cortada y limpiada como explicamos en el </span><span class="c12 c32">Anexo 1</span><span class="c17 c12">, as&iacute; como todos los scripts en sus formatos, aunque en los anexos tambi&eacute;n los ten&eacute;is. Tambi&eacute;n est&aacute;n algunos documentos CSV, siendo los resultados de algunos scripts. En general, est&aacute;n todos los documentos y respuestas de este trabajo. </span></p><h6 class="c44 c50" id="h.9enu9dvpjwh4"><span class="c17 c72">6.1. Anexo 1</span></h6><p class="c35"><span class="c17 c12">Tenemos dos bases de datos que hay que juntar para poder trabajar con una &uacute;nica base de datos, haciendo m&aacute;s f&aacute;cil la labor del an&aacute;lisis de los datos y nuestro modelo, as&iacute; que para ello utilizaremos SQL, en mi caso, y por el gran volumen de datos que tenemos en un primer momento, he optado por usar DataGrip ya que me permite subir archivos grandes y con gran cantidad de datos al programa sin problema y juntar las dos bases de datos.</span></p><p class="c35"><span class="c17 c12">Las dos bases de datos principales son demasiado grandes como para compartirlas, pero en este trabajo se han compartido links para que puedan descargarlas, a&uacute;n as&iacute; se compartir&aacute;n la base de datos limpia y unida, que ser&aacute; la base de los an&aacute;lisis posteriores.</span></p><p class="c35"><span class="c17 c12">Para limpiar los datos, cargamos ambas bases de datos en DataGrip. Primero trabajaremos en la consola de la base de datos, &ldquo;spotify_clean.sqlite3&rdquo;, en esta seleccionaremos las variables que nos son &uacute;tiles para crear nuestra nueva base de datos (name, id, popularity, duration_ms, etc.), obtendremos todos los nombres e ID&rsquo;s de artistas como matriz JSON de objetos, tambi&eacute;n obtendremos todos los ID&rsquo;s de pista con el mismo ISRC (duplicados) como matriz JSON, creamos un inner join entre tracks y albums usando el ID del &aacute;lbum, filtraremos solo las pistas que tienen un c&oacute;digo ISRC asignado, y por &uacute;ltimo, ordenaremos por popularidad descendente y limitamos los resultados a 100.000. Este &uacute;ltimo paso lo he realizado para acortar la base de datos, que sea m&aacute;s manejable y solo tengamos canciones con la popularidad de 55 o mayor n&uacute;mero. La respuesta al c&oacute;digo, guardada como CSV, tambi&eacute;n se ilustra a continuaci&oacute;n.</span></p><p class="c8"><span class="c18">-- Seleccionamos todas las columnas que nos son necesarias por la informaci&oacute;n que tienen</span></p><p class="c8"><span class="c11">SELECT</span></p><p class="c8"><span class="c21">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">rowid</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">external_id_isrc </span><span class="c21">AS </span><span class="c41">isrc</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">name </span><span class="c21">AS </span><span class="c41">track_name</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">id </span><span class="c21">AS </span><span class="c41">track_id</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">popularity</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">duration_ms</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">explicit</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">albums</span><span class="c16">.</span><span class="c14">name </span><span class="c21">AS </span><span class="c41">album_name</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">albums</span><span class="c16">.</span><span class="c14">album_type</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">albums</span><span class="c16">.</span><span class="c14">release_date</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">albums</span><span class="c16">.</span><span class="c14">rowid </span><span class="c21">AS </span><span class="c41">album_rowid</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c41">albums</span><span class="c16">.</span><span class="c14">id </span><span class="c21">AS </span><span class="c41">album_id</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c18">-- Obtener todos los nombres e ID de artistas como matriz JSON de objetos</span></p><p class="c8"><span class="c41 c32 c95">&nbsp;</span><span class="c16">(</span><span class="c21">SELECT </span><span class="c1">json_group_array</span><span class="c16">(</span><span class="c1">json_object</span><span class="c16">(</span><span class="c41 c53">&#39;name&#39;</span><span class="c16">, </span><span class="c41">artists</span><span class="c16">.</span><span class="c14">name</span><span class="c16">, </span><span class="c41 c53">&#39;id&#39;</span><span class="c16">, </span><span class="c41">artists</span><span class="c16">.</span><span class="c14">id</span><span class="c16 c42">))</span></p><p class="c8"><span class="c16">&nbsp; </span><span class="c21">FROM </span><span class="c17 c41">track_artists</span></p><p class="c8"><span class="c41">&nbsp; </span><span class="c21">JOIN </span><span class="c41">artists </span><span class="c21">ON </span><span class="c41">artists</span><span class="c16">.</span><span class="c14">rowid </span><span class="c16">= </span><span class="c41">track_artists</span><span class="c16">.</span><span class="c14 c42">artist_rowid</span></p><p class="c8"><span class="c14">&nbsp; </span><span class="c21">WHERE </span><span class="c41">track_artists</span><span class="c16">.</span><span class="c14">track_rowid </span><span class="c16">= </span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">rowid</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">artist_names</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp;</span><span class="c18">-- Obtener todos los ID de pista con el mismo ISRC (duplicados) como matriz JSON</span></p><p class="c8"><span class="c41 c32 c95">&nbsp;</span><span class="c16">(</span><span class="c21">SELECT </span><span class="c1">json_group_array</span><span class="c16">(</span><span class="c41">t2</span><span class="c16">.</span><span class="c14">id</span><span class="c16 c42">)</span></p><p class="c8"><span class="c16">&nbsp; </span><span class="c21">FROM </span><span class="c17 c41">tracks t2</span></p><p class="c8"><span class="c41">&nbsp; </span><span class="c21">WHERE </span><span class="c41">t2</span><span class="c16">.</span><span class="c14">external_id_isrc </span><span class="c16">= </span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">external_id_isrc</span><span class="c16">) </span><span class="c21">AS </span><span class="c17 c41">copies</span></p><p class="c8"><span class="c21">FROM </span><span class="c17 c41">tracks</span></p><p class="c8"><span class="c18">-- Hacemos un inner join entre tracks y albums usando el ID del &aacute;lbum</span></p><p class="c8"><span class="c21">INNER JOIN </span><span class="c41">albums </span><span class="c21">ON </span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">album_rowid </span><span class="c16">= </span><span class="c41">albums</span><span class="c16">.</span><span class="c14 c42">rowid</span></p><p class="c8"><span class="c18">-- Filtrar solo las pistas que tienen un c&oacute;digo ISRC asignado</span></p><p class="c8"><span class="c21">WHERE </span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">external_id_isrc </span><span class="c11">IS NOT NULL</span></p><p class="c8"><span class="c18">-- Ordena por popularidad descendente (los m&aacute;s populares primero)</span></p><p class="c8"><span class="c21">ORDER BY </span><span class="c41">tracks</span><span class="c16">.</span><span class="c14">popularity </span><span class="c11">DESC</span></p><p class="c8"><span class="c18">-- Limita el resultado a 100.000 registros</span></p><p class="c8"><span class="c21">LIMIT </span><span class="c41 c84">100000</span><span class="c16 c42">;</span></p><p class="c44"><span class="c24 c33">Script 1. Primer script &nbsp;SQL, sobre la base de datos &ldquo;spotify_cleaned&rdquo;, realizado en DataGrip.</span></p><p class="c44"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 642.63px; height: 205.33px;"><img alt="" src="images/image8.jpg" style="width: 642.63px; height: 205.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c44"><span class="c12 c32">Figura 3</span><span class="c12 c32">. </span><span class="c33 c12 c32">Resultados del primer c&oacute;digo SQL, realizado en DataGrip.</span></p><p class="c35"><span class="c17 c12">Con el fin de centralizar la informaci&oacute;n, los resultados obtenidos ser&aacute;n persistidos temporalmente en un archivo plano (CSV) para su posterior migraci&oacute;n a la instancia principal de SQLite. Al integrar los datos en una &uacute;nica unidad l&oacute;gica, eliminamos la necesidad de utilizar comandos ATTACH DATABASE, lo que previene la degradaci&oacute;n del rendimiento asociada al manejo de m&uacute;ltiples descriptores de archivo y mejora la velocidad de indexaci&oacute;n durante el an&aacute;lisis.</span></p><p class="c35"><span class="c12">Sobre la base de datos unificada &ldquo;spotify_clean_audio_features&rdquo;, lanzaremos la siguiente query, </span><span class="c12">el cual </span><span class="c12">nos permitir&aacute; crear &iacute;ndices para evitar que se recorran todas las l&iacute;neas y agilizar, estos &iacute;ndices</span><span class="c12">&nbsp;</span><span class="c12">se tienen que ejecutar antes que el resto del c&oacute;digo, y es la parte en la que m&aacute;s se nota la optimizaci&oacute;n del tiempo del anterior paso. Limpiamos la variable de artist_names, extrayendo y concatenando los nombres y los ID&rsquo;s, separ&aacute;ndolos en </span><span class="c12">dos </span><span class="c17 c12">columnas distintas, para que nos quede un dataset m&aacute;s limpio. Mediante una sentencia de uni&oacute;n (JOIN), se integraron las tablas spotify_recleaned (denominada spotify) y spotify_clean_audio_features (denominada features). Este proceso de selecci&oacute;n y cruce de variables permite consolidar toda la informaci&oacute;n relevante en un &uacute;nico dataset de trabajo. Solo incluimos pistas con los valores de danceability y energy conocido, este paso es para asegurarnos de solo incluir pistas con las variables necesarias conocidas, ya que en el dataset original nos encontramos con pistas en las cuales estas variables necesarias est&aacute;n todas en blanco. Finalmente, ordenamos el resultado por popularidad descendente y limitamos el resultado a 100.000 pistas, aunque este &uacute;ltimo no ser&iacute;a necesario.</span></p><p class="c35"><span class="c12">Con estos pasos tendremos una nueva base de datos, ya limpia, cortada y unida, a la cual hemos llamado &ldquo;spotify_with_features&rdquo; y guardada en CSV.</span><span class="c12">&nbsp;Como resultado de este flujo de trabajo, se ha generado un dataset consolidado denominado </span><span class="c12">&ldquo;spotify_with_features&rdquo;</span><span class="c17 c12">. Este conjunto de datos, tras haber sido sometido a procesos de limpieza, filtrado de atributos y uni&oacute;n relacional, se ha persistido en formato CSV para facilitar su portabilidad y consumo en las siguientes etapas de an&aacute;lisis y modelado.</span></p><p class="c8"><span class="c18">-- Creamos index para evitar que se recorran todas las l&iacute;neas de la base de datos y agilizar el proceso</span></p><p class="c8"><span class="c21">CREATE INDEX IF NOT EXISTS </span><span class="c16 c42">idx_audio_track_id</span></p><p class="c8"><span class="c21">ON </span><span class="c41">track_audio_features</span><span class="c16">(</span><span class="c14">track_id</span><span class="c16 c42">);</span></p><p class="c8 c45"><span class="c16 c42"></span></p><p class="c8"><span class="c21">CREATE INDEX IF NOT EXISTS </span><span class="c16 c42">idx_spotify_top_track_id</span></p><p class="c8"><span class="c21">ON </span><span class="c41">spotify_recleaned</span><span class="c16">(</span><span class="c14">track_id</span><span class="c16 c42">);</span></p><p class="c8 c45"><span class="c16 c42"></span></p><p class="c8"><span class="c11">SELECT</span></p><p class="c8"><span class="c21">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">track_id</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">track_name</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c18">-- Extrae y concatena los nombres de los artistas de la pista en un solo string, separados por comas</span></p><p class="c8"><span class="c41 c32 c95">&nbsp; &nbsp;</span><span class="c16 c42">(</span></p><p class="c8"><span class="c16">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c21">SELECT </span><span class="c1">group_concat</span><span class="c16">(</span><span class="c1">json_extract</span><span class="c16">(</span><span class="c14">value</span><span class="c16">, </span><span class="c41 c53">&#39;$.name&#39;</span><span class="c16">), </span><span class="c41 c53">&#39;, &#39;</span><span class="c16 c42">)</span></p><p class="c8"><span class="c16">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c21">FROM </span><span class="c1">json_each</span><span class="c16">(</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">artist_names</span><span class="c16 c42">)</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;) </span><span class="c21">AS </span><span class="c41">artist_names</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c18">-- Extrae y concatena los IDs de los artistas asociados a la pista en un solo string, separados por comas</span></p><p class="c8"><span class="c41 c32 c95">&nbsp; &nbsp;</span><span class="c16 c42">(</span></p><p class="c8"><span class="c16">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c21">SELECT </span><span class="c1">group_concat</span><span class="c16">(</span><span class="c1">json_extract</span><span class="c16">(</span><span class="c14">value</span><span class="c16">, </span><span class="c41 c53">&#39;$.id&#39;</span><span class="c16">), </span><span class="c41 c53">&#39;, &#39;</span><span class="c16 c42">)</span></p><p class="c8"><span class="c16">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c21">FROM </span><span class="c1">json_each</span><span class="c16">(</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">artist_names</span><span class="c16 c42">)</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;) </span><span class="c21">AS </span><span class="c41">artist_id</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">isrc</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">popularity</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">explicit</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">album_name</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">album_type</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">features</span><span class="c16">.</span><span class="c14">key</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c41">features</span><span class="c16">.</span><span class="c14">mode</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">danceability </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">danceability</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">loudness </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">loudness</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">speechiness </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">speechiness</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">acousticness </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">acousticness</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">energy </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">energy</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">valence </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">valence</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">tempo </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">tempo</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">instrumentalness </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c41">instrumentalness</span><span class="c16 c42">,</span></p><p class="c8"><span class="c16">&nbsp; &nbsp;</span><span class="c1">REPLACE</span><span class="c16">(</span><span class="c1">CAST</span><span class="c16">(</span><span class="c41">features</span><span class="c16">.</span><span class="c14">liveness </span><span class="c21">AS TEXT</span><span class="c16">), </span><span class="c41 c53">&#39;.&#39;</span><span class="c16">, </span><span class="c41 c53">&#39;,&#39;</span><span class="c16">) </span><span class="c21">AS </span><span class="c17 c41">liveness</span></p><p class="c8"><span class="c18">-- Renombramos la tabla de spotify_recleaned como spotify</span></p><p class="c8"><span class="c21">FROM </span><span class="c17 c41">spotify_recleaned spotify</span></p><p class="c8"><span class="c18">-- Unimos con la tabla track_audio_features y renombramos la tabla de track_audio_features como features</span></p><p class="c8"><span class="c21">JOIN </span><span class="c17 c41">track_audio_features features</span></p><p class="c8"><span class="c41">&nbsp; &nbsp;</span><span class="c21">ON </span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">track_id </span><span class="c16">= </span><span class="c41">features</span><span class="c16">.</span><span class="c14 c42">track_id</span></p><p class="c8"><span class="c18">-- Solo incluimos pistas con valor de &quot;danceability&quot; y &quot;energy&quot; conocido</span></p><p class="c8"><span class="c11">WHERE</span></p><p class="c8"><span class="c21">&nbsp; &nbsp;</span><span class="c41">features</span><span class="c16">.</span><span class="c14">danceability </span><span class="c11">IS NOT NULL</span></p><p class="c8"><span class="c21">&nbsp; &nbsp;AND </span><span class="c41">features</span><span class="c16">.</span><span class="c14">energy </span><span class="c11">IS NOT NULL</span></p><p class="c8"><span class="c18">-- Ordenamos el resultado por popularidad (los m&aacute;s populares primero)</span></p><p class="c8"><span class="c21">ORDER BY </span><span class="c41">spotify</span><span class="c16">.</span><span class="c14">popularity </span><span class="c11">DESC</span></p><p class="c8"><span class="c18">-- Limitamos el resultado a un m&aacute;ximo de 11,000 filas</span></p><p class="c8"><span class="c21">LIMIT </span><span class="c41 c84">100000</span><span class="c16">;</span></p><p class="c44"><span class="c24">Script </span><span class="c24 c33">2. Segundo script SQL, sobre la base de datos &ldquo;spotify_clean_audio_features.sqlite3&rdquo;, realizado en DataGrip.</span></p><p class="c44"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 642.63px; height: 105.33px;"><img alt="" src="images/image4.jpg" style="width: 642.63px; height: 105.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c44"><span class="c24">Figura 4. </span><span class="c24">Resultados del segundo c&oacute;digo SQL, realizado en DataGrip.</span></p><h6 class="c44 c50" id="h.6h4mihf77p1"><span class="c7">6.2. Anexo 2</span></h6><p class="c35"><span class="c12">Con la base de datos limpia, podemos empezar a escribir nuestro c&oacute;digo Python, para el an&aacute;lisis de los datos he decidido usar el IDE Visual Studio Code ya que es uno de los IDE mas simples y funcionales actualmente. </span><span class="c12">En </span><span class="c12">este primer archivo python (spotify_lightgbm.py) realizaremos la regresi&oacute;n linear m&uacute;ltiple, donde definiremos nuestras 12 variables independientes, y nuestra variable dependiente, </span><span class="c12 c32">popularity</span><span class="c12">, y estimamos con el modelo OLS. A&ntilde;adimos una funci&oacute;n para que nos saque las estrellas significativas, ayud&aacute;ndonos a ver los datos de una forma m&aacute;s r&aacute;pida y visual, y construimos y creamos la tabla de resultados, junto con con el R&sup2;, el &nbsp;R&sup2; ajustado y el n&uacute;mero de observaciones. Con este c&oacute;digo y tabla de salida en el terminal podemos argumentar nuestro an&aacute;lisis simple del punto 3.1.</span></p><p class="c5"><span class="c37"># REGRESI&Oacute;N LINEAL M&Uacute;LTIPLE SPOTIFY</span></p><p class="c5"><span class="c37"># Antes de ejecutar el c&oacute;digo, instalar &quot;pip install statsmodels&quot; y &quot;pip install jinja2&quot; en el terminal</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">pandas</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">pd</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">statsmodels</span><span class="c2">.</span><span class="c9">api</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">sm</span></p><p class="c5"><span class="c37"># Cargar los datos</span></p><p class="c5"><span class="c41 c49">df</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c22">read_csv</span><span class="c2">(</span><span class="c13">&quot;DataBases\spotify_with_features.csv&quot;</span><span class="c2">, </span><span class="c41 c49">decimal</span><span class="c41">=</span><span class="c13">&quot;,&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Definir las variables</span></p><p class="c5"><span class="c41 c49">y</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c2">[</span><span class="c13">&quot;popularity&quot;</span><span class="c0">]</span></p><p class="c5"><span class="c34">X</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c0">[</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; [</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;explicit&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;key&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;mode&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;danceability&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;loudness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;speechiness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;energy&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;valence&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;acousticness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;tempo&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;instrumentalness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;liveness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c5"><span class="c0">]</span></p><p class="c5"><span class="c37"># A&ntilde;adimos la constante</span></p><p class="c5"><span class="c34">X</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">sm</span><span class="c2">.</span><span class="c22">add_constant</span><span class="c2">(</span><span class="c34">X</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Estimar modelo OLS</span></p><p class="c5"><span class="c41 c49">model</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">sm</span><span class="c2">.</span><span class="c9">OLS</span><span class="c2">(</span><span class="c41 c49">y</span><span class="c2">, </span><span class="c34">X</span><span class="c2">).</span><span class="c22">fit</span><span class="c0">()</span></p><p class="c5"><span class="c37"># Funci&oacute;n para estrellas</span></p><p class="c5"><span class="c6">def</span><span class="c2">&nbsp;</span><span class="c22">significance_stars</span><span class="c2">(</span><span class="c41 c49">p</span><span class="c0">):</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c39">if</span><span class="c2">&nbsp;</span><span class="c41 c49">p</span><span class="c2">&nbsp;</span><span class="c41">&lt;</span><span class="c2">&nbsp;</span><span class="c41 c47">0.01</span><span class="c0">:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c39">return</span><span class="c2">&nbsp;</span><span class="c13 c42">&quot;***&quot;</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c39">elif</span><span class="c2">&nbsp;</span><span class="c41 c49">p</span><span class="c2">&nbsp;</span><span class="c41">&lt;</span><span class="c2">&nbsp;</span><span class="c41 c47">0.05</span><span class="c0">:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c39">return</span><span class="c2">&nbsp;</span><span class="c13 c42">&quot;**&quot;</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c39">elif</span><span class="c2">&nbsp;</span><span class="c41 c49">p</span><span class="c2">&nbsp;</span><span class="c41">&lt;</span><span class="c2">&nbsp;</span><span class="c41 c47">0.1</span><span class="c0">:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c39">return</span><span class="c2">&nbsp;</span><span class="c13 c42">&quot;*&quot;</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c39">else</span><span class="c0">:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c39">return</span><span class="c2">&nbsp;</span><span class="c13 c42">&quot;&quot;</span></p><p class="c5"><span class="c37"># Construir tabla de resultados</span></p><p class="c5"><span class="c41 c49">rows</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c0">&nbsp;[]</span></p><p class="c5"><span class="c39">for</span><span class="c2">&nbsp;</span><span class="c41 c49">var</span><span class="c2">&nbsp;</span><span class="c39">in</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c0">.params.index:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">coef</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c2">.params[</span><span class="c41 c49">var</span><span class="c0">]</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">se</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c2">.bse[</span><span class="c41 c49">var</span><span class="c0">]</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">pval</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c2">.pvalues[</span><span class="c41 c49">var</span><span class="c0">]</span></p><p class="c5 c45"><span class="c0"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">coef_str</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c6">f</span><span class="c13">&quot;</span><span class="c6">{</span><span class="c41 c49">coef</span><span class="c6">:.3f}{</span><span class="c22">significance_stars</span><span class="c2">(</span><span class="c41 c49">pval</span><span class="c2">)</span><span class="c6">}</span><span class="c13 c42">&quot;</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">se_str</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c6">f</span><span class="c13">&quot;(</span><span class="c6">{</span><span class="c41 c49">se</span><span class="c6">:.3f}</span><span class="c13 c42">)&quot;</span></p><p class="c5 c45"><span class="c0"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">rows</span><span class="c2">.</span><span class="c22">append</span><span class="c2">([</span><span class="c41 c49">coef_str</span><span class="c2">, </span><span class="c41 c49">se_str</span><span class="c0">])</span></p><p class="c5"><span class="c41 c49">table</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c9">DataFrame</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">rows</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">index</span><span class="c41">=</span><span class="c41 c49">model</span><span class="c0">.params.index,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">columns</span><span class="c41">=</span><span class="c2">[</span><span class="c13">&quot;Coeficiente&quot;</span><span class="c2">, </span><span class="c13">&quot;Error est&aacute;ndar&quot;</span><span class="c0">],</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Mostrar tabla de resultados</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;</span><span class="c41 c69">\n</span><span class="c13">TABLA DE REGRESI&Oacute;N (DEPENDIENTE: POPULARITY)</span><span class="c41 c69">\n</span><span class="c13">&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c41 c49">table</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Informaci&oacute;n adicional de R&sup2;,R&sup2; ajustado y Obervaciones</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;</span><span class="c41 c69">\n</span><span class="c13">R&sup2;:&quot;</span><span class="c2">, </span><span class="c22">round</span><span class="c2">(</span><span class="c41 c49">model</span><span class="c2">.rsquared, </span><span class="c41 c47">3</span><span class="c0">))</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;R&sup2; ajustado:&quot;</span><span class="c2">, </span><span class="c22">round</span><span class="c2">(</span><span class="c41 c49">model</span><span class="c2">.rsquared_adj, </span><span class="c41 c47">3</span><span class="c0">))</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;Observaciones:&quot;</span><span class="c2">, </span><span class="c9">int</span><span class="c2">(</span><span class="c41 c49">model</span><span class="c0">.nobs))</span></p><p class="c5"><span class="c37"># Exportar resultados a CSV</span></p><p class="c5"><span class="c41 c49">table</span><span class="c2">.</span><span class="c22">to_excel</span><span class="c2">(</span><span class="c13">&quot;tabla_regresion_spotify.xlsx&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">latex_table</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">table</span><span class="c2">.</span><span class="c22">to_latex</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">caption</span><span class="c41">=</span><span class="c13">&quot;Regresi&oacute;n lineal m&uacute;ltiple (variable dependiente: Popularity)&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">label</span><span class="c41">=</span><span class="c13">&quot;tab:spotify_regression&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">escape</span><span class="c41">=</span><span class="c6 c42">False</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c39">with</span><span class="c2">&nbsp;</span><span class="c22">open</span><span class="c2">(</span><span class="c13">&quot;tabla_regresion_spotify.tex&quot;</span><span class="c2">, </span><span class="c13">&quot;w&quot;</span><span class="c2">) </span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c41 c49">f</span><span class="c0">:</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">f</span><span class="c2">.</span><span class="c22">write</span><span class="c2">(</span><span class="c41 c49">latex_table</span><span class="c0">)</span></p><p class="c44"><span class="c24">Script 3. Primer script</span><span class="c24">&nbsp;</span><span class="c24">de Python en Visual Studio Code, </span><span class="c24">spotify_regression</span><span class="c24">.py.</span></p><p class="c86"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 341.91px; height: 253.27px;"><img alt="" src="images/image3.jpg" style="width: 341.91px; height: 253.27px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c86"><span class="c24">Figura 5.</span><span class="c24">&nbsp;Resultados del primer script Python, realizado en Visual Studio Code.</span></p><h6 class="c44 c50" id="h.nv4f63yks8x4"><span class="c43">6.3. Anexo 3</span></h6><p class="c35"><span class="c12">El siguiente </span><span class="c12">script </span><span class="c12">entrena un modelo </span><span class="c12">LightGBM</span><span class="c12">&nbsp;Regressor para explicar la popularidad de canciones de Spotify a partir de caracter&iacute;sticas ac&uacute;sticas, evaluando su rendimiento y analizando la importancia de las variables. Para ello importamos las librer&iacute;as necesarias, cargamos y limpiamos los datos, eliminando los valores nulos. Tenemos que definir las variables, tanto la dependiente como el conjunto de variables explicativas ac&uacute;sticas, en este caso no es necesario que escalemos las variables porque </span><span class="c12">LightGBM</span><span class="c12">&nbsp;se basa en &aacute;rboles. Dividimos el conjunto de datos en Train/Test, siendo un 80% de entrenamiento y un 20% de test, permitiendo evaluar el rendimiento fuera de muestra. Creamos los datasets de LightGBM, utilizando el formato propio de este para optimizar el entrenamiento, definimos los par&aacute;metros y entrenamos el modelo con Early Stopping. El modelo se entrena hasta un m&aacute;ximo de 1.000 &aacute;rboles, pero se detiene autom&aacute;ticamente si no mejora en 50 iteraciones. Evaluamos el modelo utilizando la capacidad explicativa, R&sup2;, y el error medio de predicci&oacute;n, RMSE. Por &uacute;ltimo en la parte de </span><span class="c12">LightGBM</span><span class="c12">, se calcula la importancia de cada variable seg&uacute;n la ganancia promedio en los &aacute;rboles, creando la </span><span class="c12 c32">Figura 1</span><span class="c12">&nbsp;y su tabla (</span><span class="c12 c32">Figura 6</span><span class="c17 c12">).</span></p><p class="c35"><span class="c12">Yendo un paso m&aacute;s all&aacute;, hacemos una interpretaci&oacute;n avanzada con SHAP, ya que nos permite interpretar c&oacute;mo cada variable contribuye a la predicci&oacute;n del modelo. Primero mostramos el conjunto de entrenamiento y calculamos los valores SHAP, a&ntilde;adimos la importancia global y creamos el gr&aacute;fico de la </span><span class="c12 c32">Figura 2</span><span class="c17 c12">. Con esto, tenemos valores entre 0 y 1, un gr&aacute;fico limpio y visualmente interpretable.</span></p><p class="c5"><span class="c41 c71"># AN&Aacute;LISIS DE POPULARIDAD CON LIGHTGBM</span></p><p class="c5"><span class="c41 c71"># Antes de ejecutar el c&oacute;digo, instalar &quot;pip install lightgbm shap&quot; en el terminal</span></p><p class="c5"><span class="c37"># Importar librer&iacute;as</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">pandas</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">pd</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">numpy</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9">np</span></p><p class="c5"><span class="c39">from</span><span class="c2">&nbsp;</span><span class="c9">sklearn</span><span class="c2">.</span><span class="c9">model_selection</span><span class="c2">&nbsp;</span><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c19">train_test_split</span></p><p class="c5"><span class="c39">from</span><span class="c2">&nbsp;</span><span class="c9">sklearn</span><span class="c2">.</span><span class="c9">metrics</span><span class="c2">&nbsp;</span><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c22">r2_score</span><span class="c2">, </span><span class="c22">mean_squared_error</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">lightgbm</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">lgb</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9 c42">shap</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">matplotlib</span><span class="c2">.</span><span class="c9">pyplot</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9">plt</span></p><p class="c5"><span class="c37"># Cargar los datos</span></p><p class="c5"><span class="c41 c49">df</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c22">read_csv</span><span class="c2">(</span><span class="c13">&quot;DataBases\spotify_with_features.csv&quot;</span><span class="c2">, </span><span class="c41 c49">decimal</span><span class="c41">=</span><span class="c13">&quot;,&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">df</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c2">.</span><span class="c22">dropna</span><span class="c0">()</span></p><p class="c5"><span class="c37"># Definir las variables (dependiente y explicativas)</span></p><p class="c5"><span class="c41 c49">y</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c2">[</span><span class="c13">&quot;popularity&quot;</span><span class="c0">]</span></p><p class="c5"><span class="c34">X</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c0">[</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; [</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;explicit&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;key&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;mode&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;danceability&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;loudness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;speechiness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;energy&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;valence&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;acousticness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;tempo&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;instrumentalness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;liveness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c5"><span class="c0">]</span></p><p class="c5"><span class="c37"># Hacer el test split</span></p><p class="c5"><span class="c41 c49">X_train</span><span class="c2">, </span><span class="c41 c49">X_test</span><span class="c2">, </span><span class="c41 c49">y_train</span><span class="c2">, </span><span class="c41 c49">y_test</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c22">train_test_split</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c34">X</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">y</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">test_size</span><span class="c41">=</span><span class="c41 c47">0.2</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">random_state</span><span class="c41">=</span><span class="c41 c42 c47">42</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Crear data sets LightGBM</span></p><p class="c5"><span class="c41 c49">train_data</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c9">Dataset</span><span class="c2">(</span><span class="c41 c49">X_train</span><span class="c2">, </span><span class="c41 c49">label</span><span class="c41">=</span><span class="c41 c49">y_train</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">test_data</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c9">Dataset</span><span class="c2">(</span><span class="c41 c49">X_test</span><span class="c2">, </span><span class="c41 c49">label</span><span class="c41">=</span><span class="c41 c49">y_test</span><span class="c2">, </span><span class="c41 c49">reference</span><span class="c41">=</span><span class="c41 c49">train_data</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Definir par&aacute;metros del modelo, siendo estos estables, est&aacute;ndar y defendibles</span></p><p class="c5"><span class="c41 c49">params</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c0">&nbsp;{</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;objective&quot;</span><span class="c2">: </span><span class="c13">&quot;regression&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;metric&quot;</span><span class="c2">: </span><span class="c13">&quot;rmse&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;boosting_type&quot;</span><span class="c2">: </span><span class="c13">&quot;gbdt&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;learning_rate&quot;</span><span class="c2">: </span><span class="c41 c47">0.05</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;num_leaves&quot;</span><span class="c2">: </span><span class="c41 c47">31</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;max_depth&quot;</span><span class="c2">: </span><span class="c41">-</span><span class="c41 c47">1</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;feature_fraction&quot;</span><span class="c2">: </span><span class="c41 c47">0.9</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;bagging_fraction&quot;</span><span class="c2">: </span><span class="c41 c47">0.8</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;bagging_freq&quot;</span><span class="c2">: </span><span class="c41 c47">5</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;verbosity&quot;</span><span class="c2">: </span><span class="c41">-</span><span class="c41 c47">1</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;seed&quot;</span><span class="c2">: </span><span class="c41 c47">42</span><span class="c0">,</span></p><p class="c5"><span class="c0">}</span></p><p class="c5"><span class="c37"># Entrenamos el modelo con early stopping</span></p><p class="c5"><span class="c41 c49">model</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">train</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">params</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">train_data</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">num_boost_round</span><span class="c41">=</span><span class="c41 c47">1000</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">valid_sets</span><span class="c41">=</span><span class="c2">[</span><span class="c41 c49">train_data</span><span class="c2">, </span><span class="c41 c49">test_data</span><span class="c0">],</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">valid_names</span><span class="c41">=</span><span class="c2">[</span><span class="c13">&quot;train&quot;</span><span class="c2">, </span><span class="c13">&quot;test&quot;</span><span class="c0">],</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">callbacks</span><span class="c41">=</span><span class="c0">[</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">early_stopping</span><span class="c2">(</span><span class="c41 c49">stopping_rounds</span><span class="c41">=</span><span class="c41 c47">50</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">log_evaluation</span><span class="c2">(</span><span class="c41 c47">100</span><span class="c0">),</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Evaluaci&oacute;n del modelo</span></p><p class="c5"><span class="c41 c49">y_pred</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c2">.</span><span class="c22">predict</span><span class="c2">(</span><span class="c41 c49">X_test</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">r2</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c22">r2_score</span><span class="c2">(</span><span class="c41 c49">y_test</span><span class="c2">, </span><span class="c41 c49">y_pred</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">rmse</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">np</span><span class="c2">.</span><span class="c41 c49">sqrt</span><span class="c2">(</span><span class="c22">mean_squared_error</span><span class="c2">(</span><span class="c41 c49">y_test</span><span class="c2">, </span><span class="c41 c49">y_pred</span><span class="c0">))</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;R&sup2;:&quot;</span><span class="c2">, </span><span class="c22">round</span><span class="c2">(</span><span class="c41 c49">r2</span><span class="c2">, </span><span class="c41 c47">3</span><span class="c0">))</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c13">&quot;RMSE:&quot;</span><span class="c2">, </span><span class="c22">round</span><span class="c2">(</span><span class="c41 c49">rmse</span><span class="c2">, </span><span class="c41 c47">3</span><span class="c0">))</span></p><p class="c5"><span class="c37"># Vemos la importancia de variables</span></p><p class="c5"><span class="c41 c49">importance</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c9">DataFrame</span><span class="c0">({</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;Variable&quot;</span><span class="c2">: </span><span class="c34">X</span><span class="c2">.</span><span class="c41 c49">columns</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;Importance&quot;</span><span class="c2">: </span><span class="c41 c49">model</span><span class="c2">.</span><span class="c22">feature_importance</span><span class="c2">(</span><span class="c41 c49">importance_type</span><span class="c41">=</span><span class="c13">&quot;gain&quot;</span><span class="c0">),</span></p><p class="c5"><span class="c0">})</span></p><p class="c5"><span class="c41 c49">importance</span><span class="c2">[</span><span class="c13">&quot;Importance_relativa&quot;</span><span class="c2">] </span><span class="c41">=</span><span class="c0">&nbsp;(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">importance</span><span class="c2">[</span><span class="c13">&quot;Importance&quot;</span><span class="c2">] </span><span class="c22">/</span><span class="c2">&nbsp;</span><span class="c41 c49">importance</span><span class="c2">[</span><span class="c13">&quot;Importance&quot;</span><span class="c2">].</span><span class="c22">sum</span><span class="c0">()</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c41 c49">importance</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">importance</span><span class="c2">.</span><span class="c22">sort_values</span><span class="c2">(</span><span class="c13">&quot;Importance_relativa&quot;</span><span class="c2">, </span><span class="c41 c49">ascending</span><span class="c41">=</span><span class="c6">False</span><span class="c0">)</span></p><p class="c5"><span class="c22">print</span><span class="c2">(</span><span class="c41 c49">importance</span><span class="c2">[[</span><span class="c13">&quot;Variable&quot;</span><span class="c2">, </span><span class="c13">&quot;Importance_relativa&quot;</span><span class="c0">]])</span></p><p class="c5"><span class="c37"># Creamos el gr&aacute;fico</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">figure</span><span class="c2">(</span><span class="c41 c49">figsize</span><span class="c41">=</span><span class="c2">(</span><span class="c41 c47">8</span><span class="c2">, </span><span class="c41 c47">6</span><span class="c0">))</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">barh</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">importance</span><span class="c2">[</span><span class="c13">&quot;Variable&quot;</span><span class="c0">],</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">importance</span><span class="c2">[</span><span class="c13">&quot;Importance_relativa&quot;</span><span class="c0">]</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">xlabel</span><span class="c2">(</span><span class="c13">&quot;Gain&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">ylabel</span><span class="c2">(</span><span class="c13">&quot;Variable&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">title</span><span class="c2">(</span><span class="c13">&quot;Feature Importance&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">gca</span><span class="c2">().</span><span class="c22">invert_yaxis</span><span class="c2">() &nbsp;</span><span class="c37"># variable m&aacute;s importante arriba</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">tight_layout</span><span class="c0">()</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">show</span><span class="c0">()</span></p><p class="c5"><span class="c37"># 8) SHAP</span></p><p class="c5"><span class="c41 c49">sample_X</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">X_train</span><span class="c2">.sample(</span><span class="c41 c47">5000</span><span class="c2">, </span><span class="c41 c49">random_state</span><span class="c41">=</span><span class="c41 c47">42</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">explainer</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">shap</span><span class="c2">.</span><span class="c9">TreeExplainer</span><span class="c2">(</span><span class="c41 c49">model</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">shap_values</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">explainer</span><span class="c2">.</span><span class="c22">shap_values</span><span class="c2">(</span><span class="c41 c49">sample_X</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">figure</span><span class="c2">(</span><span class="c41 c49">figsize</span><span class="c41">=</span><span class="c2">(</span><span class="c41 c47">9</span><span class="c2">, </span><span class="c41 c47">6</span><span class="c0">))</span></p><p class="c5"><span class="c9">shap</span><span class="c2">.</span><span class="c22">summary_plot</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">shap_values</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">sample_X</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">plot_type</span><span class="c41">=</span><span class="c13">&quot;bar&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">show</span><span class="c41">=</span><span class="c6 c42">False</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">title</span><span class="c2">(</span><span class="c13">&quot;SHAP Value Summary Plot&quot;</span><span class="c2">, </span><span class="c41 c49">fontsize</span><span class="c41">=</span><span class="c41 c47">14</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">xlabel</span><span class="c2">(</span><span class="c13">&quot;SHAP&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">ylabel</span><span class="c2">(</span><span class="c13">&quot;Absolute average impact on popularity&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">tight_layout</span><span class="c0">()</span></p><p class="c5"><span class="c9">plt</span><span class="c2">.</span><span class="c22">show</span><span class="c0">()</span></p><p class="c44"><span class="c24">Script 4. Segundo script de Python en Visual Studio Code, spotify_lightgbm.py.</span></p><p class="c86"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 341.91px; height: 253.27px;"><img alt="" src="images/image3.jpg" style="width: 341.91px; height: 253.27px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c86"><span class="c24">Figura 6. </span><span class="c24">Resultados del segundo script Python en VSCode, LightGBM.</span></p><h6 class="c44 c50" id="h.o6etylow8s0p"><span class="c43">6.4. Anexo 4</span></h6><p class="c35"><span class="c12">Para hacer el modelo predictivo de machine learning, necesitamos el modelo LightGBM anterior ya entrenado, as&iacute; que las primeras l&iacute;neas de c&oacute;digo ser&aacute;n bastante parecidas a las del </span><span class="c12 c32">Script</span><span class="c12 c32">&nbsp;</span><span class="c12 c32">4</span><span class="c12">. La idea clave de este modelo es no generar n&uacute;meros aleatorios, sino dentro de los rangos reales de Spotify, as&iacute; que tenemos que incluir esos par&aacute;metros en nuestra generaci&oacute;n de las canciones ficticias, pudiendo tener as&iacute; canciones ficticias pero realistas. Para predecir la popularidad con LightGBM es muy importante que las columnas est&eacute;n en el mismo orden que X_train, y a&ntilde;adimos la popularidad al Data Frame. Crearemos un documento CSV con los datos ficticios y su popularidad debido a esos datos, llam&aacute;ndolo &ldquo;</span><span class="c12">canciones_simuladas_prediccion_popularidad</span><span class="c12">.csv&rdquo;, y ordenamos </span><span class="c12">las canciones</span><span class="c12">&nbsp;simuladas por orden de popularidad predicha.</span></p><p class="c5"><span class="c41 c71"># MODELO PREDICTIVO</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">numpy</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">np</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">pandas</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9">pd</span></p><p class="c5"><span class="c39">from</span><span class="c2">&nbsp;</span><span class="c9">sklearn</span><span class="c2">.</span><span class="c9">model_selection</span><span class="c2">&nbsp;</span><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c19">train_test_split</span></p><p class="c5"><span class="c39">from</span><span class="c2">&nbsp;</span><span class="c9">sklearn</span><span class="c2">.</span><span class="c9">metrics</span><span class="c2">&nbsp;</span><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c22">r2_score</span><span class="c2">, </span><span class="c22">mean_squared_error</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">lightgbm</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9 c42">lgb</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9 c42">shap</span></p><p class="c5"><span class="c39">import</span><span class="c2">&nbsp;</span><span class="c9">matplotlib</span><span class="c2">.</span><span class="c9">pyplot</span><span class="c2">&nbsp;</span><span class="c39">as</span><span class="c2">&nbsp;</span><span class="c9">plt</span></p><p class="c5"><span class="c37"># Antes de generar canciones aleatorias, copiamos el modelo entrenado</span></p><p class="c5"><span class="c37"># Cargar los datos</span></p><p class="c5"><span class="c41 c49">df</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c22">read_csv</span><span class="c2">(</span><span class="c13">&quot;DataBases\spotify_with_features.csv&quot;</span><span class="c2">, </span><span class="c41 c49">decimal</span><span class="c41">=</span><span class="c13">&quot;,&quot;</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">df</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c2">.</span><span class="c22">dropna</span><span class="c0">()</span></p><p class="c5"><span class="c37"># Definir las variables (dependiente y explicativas)</span></p><p class="c5"><span class="c41 c49">y</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c2">[</span><span class="c13">&quot;popularity&quot;</span><span class="c0">]</span></p><p class="c5"><span class="c34">X</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">df</span><span class="c0">[</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; [</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;explicit&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;key&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;mode&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;danceability&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;loudness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;speechiness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;energy&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;valence&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;acousticness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;tempo&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;instrumentalness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;liveness&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c5"><span class="c0">]</span></p><p class="c5"><span class="c37"># Hacer el test split</span></p><p class="c5"><span class="c41 c49">X_train</span><span class="c2">, </span><span class="c41 c49">X_test</span><span class="c2">, </span><span class="c41 c49">y_train</span><span class="c2">, </span><span class="c41 c49">y_test</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c22">train_test_split</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c34">X</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">y</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">test_size</span><span class="c41">=</span><span class="c41 c47">0.2</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">random_state</span><span class="c41">=</span><span class="c41 c42 c47">42</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Crear data sets LightGBM</span></p><p class="c5"><span class="c41 c49">train_data</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c9">Dataset</span><span class="c2">(</span><span class="c41 c49">X_train</span><span class="c2">, </span><span class="c41 c49">label</span><span class="c41">=</span><span class="c41 c49">y_train</span><span class="c0">)</span></p><p class="c5"><span class="c41 c49">test_data</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c9">Dataset</span><span class="c2">(</span><span class="c41 c49">X_test</span><span class="c2">, </span><span class="c41 c49">label</span><span class="c41">=</span><span class="c41 c49">y_test</span><span class="c2">, </span><span class="c41 c49">reference</span><span class="c41">=</span><span class="c41 c49">train_data</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Definir par&aacute;metros del modelo, siendo estos estab&ntilde;es, est&aacute;ndar y defendibles</span></p><p class="c5"><span class="c41 c49">params</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c0">&nbsp;{</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;objective&quot;</span><span class="c2">: </span><span class="c13">&quot;regression&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;metric&quot;</span><span class="c2">: </span><span class="c13">&quot;rmse&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;boosting_type&quot;</span><span class="c2">: </span><span class="c13">&quot;gbdt&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;learning_rate&quot;</span><span class="c2">: </span><span class="c41 c47">0.05</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;num_leaves&quot;</span><span class="c2">: </span><span class="c41 c47">31</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;max_depth&quot;</span><span class="c2">: </span><span class="c41">-</span><span class="c41 c47">1</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;feature_fraction&quot;</span><span class="c2">: </span><span class="c41 c47">0.9</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;bagging_fraction&quot;</span><span class="c2">: </span><span class="c41 c47">0.8</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;bagging_freq&quot;</span><span class="c2">: </span><span class="c41 c47">5</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;verbosity&quot;</span><span class="c2">: </span><span class="c41">-</span><span class="c41 c47">1</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;seed&quot;</span><span class="c2">: </span><span class="c41 c47">42</span><span class="c0">,</span></p><p class="c5"><span class="c0">}</span></p><p class="c5"><span class="c37"># Entrenamos el modelo con early stopping</span></p><p class="c5"><span class="c41 c49">model</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">train</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">params</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">train_data</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">num_boost_round</span><span class="c41">=</span><span class="c41 c47">1000</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">valid_sets</span><span class="c41">=</span><span class="c2">[</span><span class="c41 c49">train_data</span><span class="c2">, </span><span class="c41 c49">test_data</span><span class="c0">],</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">valid_names</span><span class="c41">=</span><span class="c2">[</span><span class="c13">&quot;train&quot;</span><span class="c2">, </span><span class="c13">&quot;test&quot;</span><span class="c0">],</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">callbacks</span><span class="c41">=</span><span class="c0">[</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">early_stopping</span><span class="c2">(</span><span class="c41 c49">stopping_rounds</span><span class="c41">=</span><span class="c41 c47">50</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9">lgb</span><span class="c2">.</span><span class="c22">log_evaluation</span><span class="c2">(</span><span class="c41 c47">100</span><span class="c0">),</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Generamos canciones aleatorias pero realistas</span></p><p class="c5"><span class="c6">def</span><span class="c2">&nbsp;</span><span class="c22">generar_canciones_ficticias</span><span class="c2">(</span><span class="c41 c49">n_canciones</span><span class="c41">=</span><span class="c41 c47">10</span><span class="c2">, </span><span class="c41 c49">random_state</span><span class="c41">=</span><span class="c41 c47">42</span><span class="c0">):</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">seed</span><span class="c2">(</span><span class="c41 c49">random_state</span><span class="c0">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">data</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c0">&nbsp;{</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;explicit&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">randint</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">2</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;key&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">randint</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">12</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;mode&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">randint</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">2</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;danceability&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;loudness&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41">-</span><span class="c41 c47">60</span><span class="c2">, </span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;speechiness&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;energy&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;valence&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;acousticness&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;tempo&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">60</span><span class="c2">, </span><span class="c41 c47">200</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;instrumentalness&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13">&quot;liveness&quot;</span><span class="c2">: </span><span class="c9">np</span><span class="c2">.</span><span class="c9">random</span><span class="c2">.</span><span class="c41 c49">uniform</span><span class="c2">(</span><span class="c41 c47">0</span><span class="c2">, </span><span class="c41 c47">1</span><span class="c2">, </span><span class="c41 c49">n_canciones</span><span class="c0">),</span></p><p class="c5"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">canciones</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c9">pd</span><span class="c2">.</span><span class="c9">DataFrame</span><span class="c2">(</span><span class="c41 c49">data</span><span class="c0">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">canciones</span><span class="c2">.</span><span class="c41 c49">index</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;[</span><span class="c6">f</span><span class="c13">&quot;Song_</span><span class="c6">{</span><span class="c41 c49">i</span><span class="c41">+</span><span class="c41 c47">1</span><span class="c6">}</span><span class="c13">&quot;</span><span class="c2">&nbsp;</span><span class="c39">for</span><span class="c2">&nbsp;</span><span class="c41 c49">i</span><span class="c2">&nbsp;</span><span class="c39">in</span><span class="c2">&nbsp;</span><span class="c9">range</span><span class="c2">(</span><span class="c41 c49">n_canciones</span><span class="c0">)]</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c39">return</span><span class="c2">&nbsp;</span><span class="c41 c49">canciones</span></p><p class="c5"><span class="c37"># Generar 100 canciones simuladas</span></p><p class="c5"><span class="c41 c49">canciones_simuladas</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c22">generar_canciones_ficticias</span><span class="c2">(</span><span class="c41 c49">n_canciones</span><span class="c41">=</span><span class="c41 c47">10000</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Asegurar mismo orden de columnas</span></p><p class="c5"><span class="c41 c49">canciones_simuladas</span><span class="c2">&nbsp;</span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">canciones_simuladas</span><span class="c2">[</span><span class="c34">X</span><span class="c2">.</span><span class="c41 c49">columns</span><span class="c0">]</span></p><p class="c5"><span class="c37"># Predicci&oacute;n</span></p><p class="c5"><span class="c41 c49">canciones_simuladas</span><span class="c2">[</span><span class="c13">&quot;popularidad_predicha&quot;</span><span class="c2">] </span><span class="c41">=</span><span class="c2">&nbsp;</span><span class="c41 c49">model</span><span class="c2">.</span><span class="c22">predict</span><span class="c2">(</span><span class="c41 c49">canciones_simuladas</span><span class="c0">)</span></p><p class="c5"><span class="c37"># Guardar resultados en CSV</span></p><p class="c5"><span class="c41 c49">canciones_simuladas</span><span class="c2">.</span><span class="c22">to_csv</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;canciones_simuladas_prediccion_popularidad.csv&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">index</span><span class="c41">=</span><span class="c6">True</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">float_format</span><span class="c41">=</span><span class="c13">&quot;</span><span class="c6">%.2f</span><span class="c13">&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">decimal</span><span class="c41">=</span><span class="c13 c42">&quot;.&quot;</span></p><p class="c5"><span class="c0">)</span></p><p class="c5"><span class="c37"># Ordenar por canciones m&aacute;s prometedores</span></p><p class="c5"><span class="c41 c49">canciones_simuladas</span><span class="c2">.</span><span class="c22">sort_values</span><span class="c0">(</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c13">&quot;popularidad_predicha&quot;</span><span class="c0">,</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; </span><span class="c41 c49">ascending</span><span class="c41">=</span><span class="c6 c42">False</span></p><p class="c5"><span class="c2">).</span><span class="c22">head</span><span class="c2">(</span><span class="c41 c47">10</span><span class="c0">)</span></p><p class="c44"><span class="c24">Script 5. Tercer script de Python en Visual Studio Code, model_predictor.py.</span></p><p class="c44"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 583.91px; height: 458.59px;"><img alt="" src="images/image6.jpg" style="width: 583.91px; height: 458.59px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c44"><span class="c24">Figura 7. </span><span class="c24">Resultados del tercer script en VSCode, canciones_simuladas_prediccion_popularidad.csv.</span></p><div><p class="c45 c106"><span class="c17 c43"></span></p></div></body></html>